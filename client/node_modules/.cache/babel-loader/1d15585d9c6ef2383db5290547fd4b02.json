{"ast":null,"code":"var _jsxFileName = \"/home/james/development/property-investor-dash/client/src/components/Settings.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Field } from \"react-final-form\";\nimport { createUser, updateUser, deleteUser } from \"../reducers/userReducer\";\nimport { setNotification } from \"../reducers/notificationReducer\";\nimport { required, minLength, isEmail, composeValidators } from \"../utils/formValidatorHelper\";\n\nconst Settings = ({\n  user,\n  updateUser,\n  deleteUser\n}) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id\n  };\n\n  const handleEmailChange = async values => {\n    const confirm = window.confirm(`Change email from ${userDetails.oldEmail} to ${values.newEmail}?`);\n\n    if (confirm) {\n      await updateUser({\n        newEmail: values.newEmail,\n        ...userDetails\n      });\n    }\n  };\n\n  const handlePasswordChange = async values => {\n    const {\n      oldPassword,\n      newPassword,\n      checkPassword\n    } = values;\n    await updateUser({\n      oldPassword,\n      newPassword,\n      checkPassword,\n      ...userDetails\n    });\n  };\n\n  const handleDelete = async ({\n    password\n  }) => {\n    const confirm = window.confirm(`Delete ${userDetails.username}?`);\n\n    if (confirm) {\n      await deleteUser(password, user.id);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"f24 bold mt16 mb16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, \"Settings\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleEmailChange,\n    render: ({\n      handleSubmit,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"f20 bold mt16 mb16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, \"Change Email\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"r bs-3 bg-1 p20 mb20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"change-email\",\n      className: \"f16 mb8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, \"New Email\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"font-red f12 bold ml4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Field, {\n      name: \"newEmail\",\n      validate: composeValidators(required, minLength(3), isEmail),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"relative mb20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      id: \"change-email\",\n      className: \"form-input bs-1 w100\",\n      placeholder: \"new@email.com\",\n      type: \"email\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error f10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 23\n      }\n    }, meta.error))))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nconst mapDispatchToProps = {\n  createUser,\n  updateUser,\n  deleteUser,\n  setNotification\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Settings.js"],"names":["React","connect","Form","Field","createUser","updateUser","deleteUser","setNotification","required","minLength","isEmail","composeValidators","Settings","user","userDetails","username","data","oldEmail","email","id","handleEmailChange","values","confirm","window","newEmail","handlePasswordChange","oldPassword","newPassword","checkPassword","handleDelete","password","handleSubmit","input","meta","error","touched","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Field } from \"react-final-form\";\nimport { createUser, updateUser, deleteUser } from \"../reducers/userReducer\";\nimport { setNotification } from \"../reducers/notificationReducer\";\nimport {\n  required,\n  minLength,\n  isEmail,\n  composeValidators,\n} from \"../utils/formValidatorHelper\";\n\nconst Settings = ({ user, updateUser, deleteUser }) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id,\n  };\n\n  const handleEmailChange = async (values) => {\n    const confirm = window.confirm(\n      `Change email from ${userDetails.oldEmail} to ${values.newEmail}?`\n    );\n    if (confirm) {\n      await updateUser({\n        newEmail: values.newEmail,\n        ...userDetails,\n      });\n    }\n  };\n\n  const handlePasswordChange = async (values) => {\n    const { oldPassword, newPassword, checkPassword } = values;\n    await updateUser({\n      oldPassword,\n      newPassword,\n      checkPassword,\n      ...userDetails,\n    });\n  };\n\n  const handleDelete = async ({ password }) => {\n    const confirm = window.confirm(`Delete ${userDetails.username}?`);\n    if (confirm) {\n      await deleteUser(password, user.id);\n    }\n  };\n\n  return (\n    <>\n      <h1 className=\"f24 bold mt16 mb16\">Settings</h1>\n      <Form\n        onSubmit={handleEmailChange}\n        render={({ handleSubmit, values }) => (\n          <form onSubmit={handleSubmit}>\n            <h2 className=\"f20 bold mt16 mb16\">Change Email</h2>\n            <div className=\"r bs-3 bg-1 p20 mb20\">\n              <label htmlFor=\"change-email\" className=\"f16 mb8\">\n                New Email\n                <span className=\"font-red f12 bold ml4\">*</span>\n              </label>\n              <Field\n                name=\"newEmail\"\n                validate={composeValidators(required, minLength(3), isEmail)}\n              >\n                {({ input, meta }) => (\n                  <div className=\"relative mb20\">\n                    <input\n                      id=\"change-email\"\n                      className=\"form-input bs-1 w100\"\n                      placeholder=\"new@email.com\"\n                      type=\"email\"\n                      {...input}\n                    />\n                    {meta.error && meta.touched && (\n                      <span className=\"form-error f10\">{meta.error}</span>\n                    )}\n                  </div>\n                )}\n              </Field>\n            </div>\n          </form>\n        )}\n      />\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  createUser,\n  updateUser,\n  deleteUser,\n  setNotification,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n"]},"metadata":{},"sourceType":"module"}