{"ast":null,"code":"import _regeneratorRuntime from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import{connect}from\"react-redux\";import{Form,Field}from\"react-final-form\";import{useHistory}from\"react-router-dom\";import{loginUser,demoUser}from\"../reducers/userReducer\";import{setNotification}from\"../reducers/notificationReducer\";import{required,minLength,isEmail,composeValidators}from\"../utils/formValidatorHelper\";import{CONSTANTS}from\"../static/constants\";var Login=function Login(_ref){var loginUser=_ref.loginUser,user=_ref.user,demoUser=_ref.demoUser,setNotification=_ref.setNotification;var history=useHistory();useEffect(function(){if(user.data.username){history.push(\"/\");}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2){var email,password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=_ref2.email,password=_ref2.password;_context.next=3;return loginUser(email,password);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref3.apply(this,arguments);};}();var handleForgotPassword=function handleForgotPassword(){setNotification(\"Forgot password clicked\",CONSTANTS.NOTIFICATION.MESSAGE);};var handleCreateAccount=function handleCreateAccount(){setNotification(\"Create account clicked\",CONSTANTS.NOTIFICATION.MESSAGE);};var handleDemo=function handleDemo(){demoUser();};return/*#__PURE__*/React.createElement(\"div\",{className:\"vh100 w100 fade-in relative bg-blue-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"center login\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h100 r p24 m8 bs-3 bg-1\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"bold f24 mb56 mt32 text-center\"},\"PropertyInvestorDash\"),/*#__PURE__*/React.createElement(Form,{onSubmit:onSubmit,render:function render(_ref4){var handleSubmit=_ref4.handleSubmit;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"h2\",{className:\"f16 mb8\"},\"Email\"),/*#__PURE__*/React.createElement(Field,{name:\"email\",validate:composeValidators(isEmail,required)},function(_ref5){var input=_ref5.input,meta=_ref5.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({className:\"form-input mb28 w100\",placeholder:\"example@email.com\",type:\"email\"},input,{required:true})),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-error\"},meta.error));}),/*#__PURE__*/React.createElement(\"h2\",{className:\"f16 mb8\"},\"Password\"),/*#__PURE__*/React.createElement(Field,{name:\"password\",validate:composeValidators(required,minLength(3))},function(_ref6){var input=_ref6.input,meta=_ref6.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({className:\"form-input mb32 w100\",placeholder:\"Password\",type:\"password\"},input,{required:true})),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"span\",{className:\"form-error\"},meta.error));}),/*#__PURE__*/React.createElement(\"button\",{className:\"form-button-p font-white bs-2 w100 pt8 pb8 r\",type:\"submit\"},\"Login\"));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb8 ml8 mr8\"},/*#__PURE__*/React.createElement(\"span\",{className:\"link font-n1\",onClick:handleForgotPassword},\"Forgot your password?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"mb8 ml8 mr8\"},/*#__PURE__*/React.createElement(\"span\",{className:\"link font-n1\",onClick:handleCreateAccount},\"Create an account\")),/*#__PURE__*/React.createElement(\"div\",{className:\"ml8 mr8\"},/*#__PURE__*/React.createElement(\"span\",{className:\"link font-n1\",onClick:handleDemo},\"Try a demo account\"))));};var mapStateToProps=function mapStateToProps(state){return{user:state.user};};var mapDispatchToProps={loginUser:loginUser,demoUser:demoUser,setNotification:setNotification};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Login.js"],"names":["React","useEffect","connect","Form","Field","useHistory","loginUser","demoUser","setNotification","required","minLength","isEmail","composeValidators","CONSTANTS","Login","user","history","data","username","push","onSubmit","email","password","handleForgotPassword","NOTIFICATION","MESSAGE","handleCreateAccount","handleDemo","handleSubmit","input","meta","error","touched","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Field } from \"react-final-form\";\nimport { useHistory } from \"react-router-dom\";\nimport { loginUser, demoUser } from \"../reducers/userReducer\";\nimport { setNotification } from \"../reducers/notificationReducer\";\nimport {\n  required,\n  minLength,\n  isEmail,\n  composeValidators,\n} from \"../utils/formValidatorHelper\";\nimport { CONSTANTS } from \"../static/constants\";\n\nconst Login = ({ loginUser, user, demoUser, setNotification }) => {\n  const history = useHistory();\n\n  useEffect(() => {\n    if (user.data.username) {\n      history.push(\"/\");\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onSubmit = async ({ email, password }) => {\n    await loginUser(email, password);\n  };\n\n  const handleForgotPassword = () => {\n    setNotification(\"Forgot password clicked\", CONSTANTS.NOTIFICATION.MESSAGE);\n  };\n\n  const handleCreateAccount = () => {\n    setNotification(\"Create account clicked\", CONSTANTS.NOTIFICATION.MESSAGE);\n  };\n\n  const handleDemo = () => {\n    demoUser();\n  };\n\n  return (\n    <div className=\"vh100 w100 fade-in relative bg-blue-1\">\n      <div className=\"center login\">\n        <div className=\"h100 r p24 m8 bs-3 bg-1\">\n          <h1 className=\"bold f24 mb56 mt32 text-center\">\n            PropertyInvestorDash\n          </h1>\n          <Form\n            onSubmit={onSubmit}\n            render={({ handleSubmit }) => (\n              <form onSubmit={handleSubmit}>\n                <h2 className=\"f16 mb8\">Email</h2>\n                <Field\n                  name=\"email\"\n                  validate={composeValidators(isEmail, required)}\n                >\n                  {({ input, meta }) => (\n                    <div className=\"relative\">\n                      <input\n                        className=\"form-input mb28 w100\"\n                        placeholder=\"example@email.com\"\n                        type=\"email\"\n                        {...input}\n                        required\n                      />\n                      {meta.error && meta.touched && (\n                        <div className=\"form-error\">{meta.error}</div>\n                      )}\n                    </div>\n                  )}\n                </Field>\n                <h2 className=\"f16 mb8\">Password</h2>\n                <Field\n                  name=\"password\"\n                  validate={composeValidators(required, minLength(3))}\n                >\n                  {({ input, meta }) => (\n                    <div className=\"relative\">\n                      <input\n                        className=\"form-input mb32 w100\"\n                        placeholder=\"Password\"\n                        type=\"password\"\n                        {...input}\n                        required\n                      />\n                      {meta.error && meta.touched && (\n                        <span className=\"form-error\">{meta.error}</span>\n                      )}\n                    </div>\n                  )}\n                </Field>\n                <button\n                  className=\"form-button-p font-white bs-2 w100 pt8 pb8 r\"\n                  type=\"submit\"\n                >\n                  Login\n                </button>\n              </form>\n            )}\n          />\n        </div>\n        <div className=\"mb8 ml8 mr8\">\n          <span className=\"link font-n1\" onClick={handleForgotPassword}>\n            Forgot your password?\n          </span>\n        </div>\n        <div className=\"mb8 ml8 mr8\">\n          <span className=\"link font-n1\" onClick={handleCreateAccount}>\n            Create an account\n          </span>\n        </div>\n        <div className=\"ml8 mr8\">\n          <span className=\"link font-n1\" onClick={handleDemo}>\n            Try a demo account\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  loginUser,\n  demoUser,\n  setNotification,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}