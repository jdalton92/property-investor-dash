{"ast":null,"code":"import _regeneratorRuntime from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{connect}from\"react-redux\";import{Form,Field}from\"react-final-form\";import{updateUser}from\"../../reducers/userReducer\";import{required,minLength,isEmail,composeValidators}from\"../../utils/formValidatorHelper\";var ChangeEmail=function ChangeEmail(_ref){var user=_ref.user,updateUser=_ref.updateUser;var userDetails={username:user.data.username,oldEmail:user.data.email,id:user.data.id};var handleEmailChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var confirm;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:confirm=window.confirm(\"Change email from \".concat(userDetails.oldEmail,\" to \").concat(values.newEmail,\"?\"));if(!confirm){_context.next=4;break;}_context.next=4;return updateUser(_objectSpread({newEmail:values.newEmail},userDetails));case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleEmailChange(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Form,{onSubmit:handleEmailChange,render:function render(_ref3){var handleSubmit=_ref3.handleSubmit,values=_ref3.values;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"h2\",{className:\"f20 bold mt16 mb16\"},\"Change Email\"),/*#__PURE__*/React.createElement(\"div\",{className:\"r bs-3 bg-1 p20 mb20\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"old-email\",className:\"f16 mb8\"},\"Existing Email\",/*#__PURE__*/React.createElement(\"span\",{className:\"font-red f12 bold ml4\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"relative mb20\"},/*#__PURE__*/React.createElement(\"input\",{id:\"old-email\",className:\"form-input bs-1 w100\",value:user.data.email,type:\"email\",disabled:true})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"new-email\",className:\"f16 mb8\"},\"New Email\",/*#__PURE__*/React.createElement(\"span\",{className:\"font-red f12 bold ml4\"},\"*\")),/*#__PURE__*/React.createElement(Field,{name:\"newEmail\",validate:composeValidators(required,minLength(3),isEmail)},function(_ref4){var input=_ref4.input,meta=_ref4.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative mb20\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({id:\"new-email\",className:\"form-input bs-1 w100\",placeholder:\"new@email.com\",type:\"email\"},input)),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"span\",{className:\"form-error f10\"},meta.error));}),/*#__PURE__*/React.createElement(\"button\",{className:\"form-button-p font-white bs-2 pt8 pb8 r mt12\",type:\"submit\"},\"Update\")));}});};var mapStateToProps=function mapStateToProps(state){return{user:state.user};};var mapDispatchToProps={updateUser:updateUser};export default connect(mapStateToProps,mapDispatchToProps)(ChangeEmail);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Settings/Settings.ChangeEmail.js"],"names":["React","connect","Form","Field","updateUser","required","minLength","isEmail","composeValidators","ChangeEmail","user","userDetails","username","data","oldEmail","email","id","handleEmailChange","values","confirm","window","newEmail","handleSubmit","input","meta","error","touched","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Field } from \"react-final-form\";\nimport { updateUser } from \"../../reducers/userReducer\";\nimport {\n  required,\n  minLength,\n  isEmail,\n  composeValidators,\n} from \"../../utils/formValidatorHelper\";\n\nconst ChangeEmail = ({ user, updateUser }) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id,\n  };\n\n  const handleEmailChange = async (values) => {\n    const confirm = window.confirm(\n      `Change email from ${userDetails.oldEmail} to ${values.newEmail}?`\n    );\n    if (confirm) {\n      await updateUser({\n        newEmail: values.newEmail,\n        ...userDetails,\n      });\n    }\n  };\n\n  return (\n    <Form\n      onSubmit={handleEmailChange}\n      render={({ handleSubmit, values }) => (\n        <form onSubmit={handleSubmit}>\n          <h2 className=\"f20 bold mt16 mb16\">Change Email</h2>\n          <div className=\"r bs-3 bg-1 p20 mb20\">\n            <label htmlFor=\"old-email\" className=\"f16 mb8\">\n              Existing Email\n              <span className=\"font-red f12 bold ml4\">*</span>\n            </label>\n            <div className=\"relative mb20\">\n              <input\n                id=\"old-email\"\n                className=\"form-input bs-1 w100\"\n                value={user.data.email}\n                type=\"email\"\n                disabled\n              />\n            </div>\n            <label htmlFor=\"new-email\" className=\"f16 mb8\">\n              New Email\n              <span className=\"font-red f12 bold ml4\">*</span>\n            </label>\n            <Field\n              name=\"newEmail\"\n              validate={composeValidators(required, minLength(3), isEmail)}\n            >\n              {({ input, meta }) => (\n                <div className=\"relative mb20\">\n                  <input\n                    id=\"new-email\"\n                    className=\"form-input bs-1 w100\"\n                    placeholder=\"new@email.com\"\n                    type=\"email\"\n                    {...input}\n                  />\n                  {meta.error && meta.touched && (\n                    <span className=\"form-error f10\">{meta.error}</span>\n                  )}\n                </div>\n              )}\n            </Field>\n            <button\n              className=\"form-button-p font-white bs-2 pt8 pb8 r mt12\"\n              type=\"submit\"\n            >\n              Update\n            </button>\n          </div>\n        </form>\n      )}\n    />\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  updateUser,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangeEmail);\n"]},"metadata":{},"sourceType":"module"}