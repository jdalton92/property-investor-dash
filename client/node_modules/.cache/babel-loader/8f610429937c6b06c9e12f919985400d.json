{"ast":null,"code":"import React,{useEffect}from\"react\";import{connect}from\"react-redux\";import{useHistory,useParams}from\"react-router-dom\";import Loader from\"../Shared/Loader\";import{Icon}from\"../Shared/Icon\";import{getDashboard,preSaveDashboard}from\"../../reducers/dashboardReducer\";import{setModal}from\"../../reducers/navigationReducer\";import SaveIcon from\"../../styles/svg/save.svg\";import EditIcon from\"../../styles/svg/edit.svg\";import OwnerOccupierInvestorDashboard from\"./OwnerOccupierInvestorDashboard\";import{CONSTANTS}from\"../../static/constants\";var InvestorDashboard=function InvestorDashboard(_ref){var isFetching=_ref.isFetching,preSave=_ref.preSave,currentDashboard=_ref.currentDashboard,getDashboard=_ref.getDashboard,preSaveDashboard=_ref.preSaveDashboard,setModal=_ref.setModal;var id=useParams().id;var history=useHistory();useEffect(function(){if(id&&!preSave){getDashboard(id);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id]);var handleSave=function handleSave(e){e.preventDefault();setModal(CONSTANTS.MODALS.SAVEDASHBOARD,true);};var handleEdit=function handleEdit(e){e.preventDefault();preSaveDashboard();if(id){history.push(\"/investor/edit/\".concat(id));}else{history.replace(\"/investor/edit\");}};var isEmpty=function isEmpty(obj){return Object.keys(obj).length===0&&obj.constructor===Object;};if(isFetching||isEmpty(currentDashboard.values)&&id){return/*#__PURE__*/React.createElement(Loader,null);}else{if(isEmpty(currentDashboard.values)){history.push(\"/investor/edit\");}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"dash-row relative\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"f20 bold mt16 mb16\"},\"Investor Dashboard\"),/*#__PURE__*/React.createElement(\"div\",{className:\"dash-btns flex-row\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"form-button-p bs-3 font-white pt4 pb4 flex-row align-c justify-c\",onClick:handleSave},/*#__PURE__*/React.createElement(Icon,{size:\"20px\",url:SaveIcon,color:\"white\",hover:false,active:false}),/*#__PURE__*/React.createElement(\"span\",{className:\"ml8\"},\"Save\")),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"form-button-s bs-3 font-white pt4 pb4 flex-row align-c justify-c\",onClick:handleEdit},/*#__PURE__*/React.createElement(Icon,{size:\"20px\",url:EditIcon,color:\"white\",hover:false,active:false}),/*#__PURE__*/React.createElement(\"span\",{className:\"ml8\"},\"Edit\")))),/*#__PURE__*/React.createElement(OwnerOccupierInvestorDashboard,null));}};var mapStateToProps=function mapStateToProps(state){return{currentDashboard:state.dashboards.currentDashboard.data,preSave:state.dashboards.currentDashboard.preSave,isFetching:state.dashboards.isFetching};};var mapDispatchToProps={setModal:setModal,getDashboard:getDashboard,preSaveDashboard:preSaveDashboard};export default connect(mapStateToProps,mapDispatchToProps)(InvestorDashboard);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Dashboards/InvestorDashboard.js"],"names":["React","useEffect","connect","useHistory","useParams","Loader","Icon","getDashboard","preSaveDashboard","setModal","OwnerOccupierInvestorDashboard","CONSTANTS","InvestorDashboard","isFetching","preSave","currentDashboard","id","history","handleSave","e","preventDefault","MODALS","SAVEDASHBOARD","handleEdit","push","replace","isEmpty","obj","Object","keys","length","constructor","values","SaveIcon","EditIcon","mapStateToProps","state","dashboards","data","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Loader from \"../Shared/Loader\";\nimport { Icon } from \"../Shared/Icon\";\nimport {\n  getDashboard,\n  preSaveDashboard,\n} from \"../../reducers/dashboardReducer\";\nimport { setModal } from \"../../reducers/navigationReducer\";\nimport SaveIcon from \"../../styles/svg/save.svg\";\nimport EditIcon from \"../../styles/svg/edit.svg\";\nimport OwnerOccupierInvestorDashboard from \"./OwnerOccupierInvestorDashboard\";\nimport { CONSTANTS } from \"../../static/constants\";\n\nconst InvestorDashboard = ({\n  isFetching,\n  preSave,\n  currentDashboard,\n  getDashboard,\n  preSaveDashboard,\n  setModal,\n}) => {\n  const id = useParams().id;\n  const history = useHistory();\n\n  useEffect(() => {\n    if (id && !preSave) {\n      getDashboard(id);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const handleSave = (e) => {\n    e.preventDefault();\n    setModal(CONSTANTS.MODALS.SAVEDASHBOARD, true);\n  };\n\n  const handleEdit = (e) => {\n    e.preventDefault();\n    preSaveDashboard();\n    if (id) {\n      history.push(`/investor/edit/${id}`);\n    } else {\n      history.replace(\"/investor/edit\");\n    }\n  };\n\n  const isEmpty = (obj) =>\n    Object.keys(obj).length === 0 && obj.constructor === Object;\n\n  if (isFetching || (isEmpty(currentDashboard.values) && id)) {\n    return <Loader />;\n  } else {\n    if (isEmpty(currentDashboard.values)) {\n      history.push(\"/investor/edit\");\n    }\n    return (\n      <>\n        <div className=\"dash-row relative\">\n          <h2 className=\"f20 bold mt16 mb16\">Investor Dashboard</h2>\n          <div className=\"dash-btns flex-row\">\n            <button\n              type=\"submit\"\n              className=\"form-button-p bs-3 font-white pt4 pb4 flex-row align-c justify-c\"\n              onClick={handleSave}\n            >\n              <Icon\n                size={\"20px\"}\n                url={SaveIcon}\n                color={\"white\"}\n                hover={false}\n                active={false}\n              />\n              <span className=\"ml8\">Save</span>\n            </button>\n            <button\n              type=\"submit\"\n              className=\"form-button-s bs-3 font-white pt4 pb4 flex-row align-c justify-c\"\n              onClick={handleEdit}\n            >\n              <Icon\n                size={\"20px\"}\n                url={EditIcon}\n                color={\"white\"}\n                hover={false}\n                active={false}\n              />\n              <span className=\"ml8\">Edit</span>\n            </button>\n          </div>\n        </div>\n        <OwnerOccupierInvestorDashboard />\n      </>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    currentDashboard: state.dashboards.currentDashboard.data,\n    preSave: state.dashboards.currentDashboard.preSave,\n    isFetching: state.dashboards.isFetching,\n  };\n};\n\nconst mapDispatchToProps = {\n  setModal,\n  getDashboard,\n  preSaveDashboard,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InvestorDashboard);\n"]},"metadata":{},"sourceType":"module"}