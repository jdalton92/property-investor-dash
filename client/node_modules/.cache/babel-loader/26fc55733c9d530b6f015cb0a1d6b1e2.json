{"ast":null,"code":"import _regeneratorRuntime from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import loginService from\"../services/login\";import{CONSTANTS}from\"../static/constants\";import{setToken,destroyToken}from\"../utils/tokenHelper\";import userService from\"../services/user\";var initialState={isFetching:true,data:{}};var userReducer=function userReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case\"USER_REQUEST\":return _objectSpread(_objectSpread({},state),{},{isFetching:true});case\"USER_REQUEST_FAIL\":return _objectSpread(_objectSpread({},state),{},{isFetching:false});case\"SET_USER\":return{isFetching:false,data:action.data};case\"CLEAR_USER\":return{isFetching:false,data:{}};default:return state;}};export var initUser=function initUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var loggedUserJSON,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"USER_REQUEST\"});try{loggedUserJSON=window.localStorage.getItem(\"loggedUser\");if(loggedUserJSON){user=JSON.parse(loggedUserJSON);setToken(user.token);dispatch({type:\"SET_MESSAGES\",messages:user.messagesRead});dispatch({type:\"SET_USER\",data:user});}else{dispatch({type:\"USER_REQUEST_FAIL\"});}}catch(e){dispatch({type:\"SET_NOTIFICATION\",content:{message:e.response.data.error,type:\"error\"}});}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var demoUser=function demoUser(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:\"USER_REQUEST\"});try{user=CONSTANTS.DEMOTOKEN;window.localStorage.setItem(\"loggedUser\",JSON.stringify(user));setToken(user.token);dispatch({type:\"SET_MESSAGES\",messages:user.messagesRead});dispatch({type:\"SET_USER\",data:user});}catch(e){console.log(e);dispatch({type:\"SET_NOTIFICATION\",content:{message:e,type:\"error\"}});}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var createUser=function createUser(_ref3){var username=_ref3.username,email=_ref3.email,password=_ref3.password,checkPassword=_ref3.checkPassword;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var user;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:\"USER_REQUEST\"});_context3.prev=1;_context3.next=4;return userService.create({username:username,email:email,password:password,checkPassword:checkPassword});case 4:_context3.next=6;return loginService.login({email:email,password:password});case 6:user=_context3.sent;window.localStorage.setItem(\"loggedUser\",JSON.stringify(user));setToken(user.token);dispatch({type:\"SET_MESSAGES\",messages:user.messagesRead});dispatch({type:\"SET_USER\",data:user});dispatch({type:\"SET_NOTIFICATION\",content:{message:\"\".concat(username,\" created\"),type:\"success\"}});_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](1);dispatch({type:\"USER_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{message:_context3.t0.response.data.error,type:\"danger\"}});case 18:case\"end\":return _context3.stop();}}},_callee3,null,[[1,14]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();};export var logoutUser=function logoutUser(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:destroyToken();window.localStorage.removeItem(\"loggedUser\");dispatch({type:\"CLEAR_USER\"});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref5.apply(this,arguments);};}();};export var loginUser=function loginUser(email,password){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var user;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:\"USER_REQUEST\"});_context5.prev=1;_context5.next=4;return loginService.login({email:email,password:password});case 4:user=_context5.sent;window.localStorage.setItem(\"loggedUser\",JSON.stringify(user));setToken(user.token);dispatch({type:\"SET_MESSAGES\",messages:user.messagesRead});dispatch({type:\"SET_USER\",data:user});_context5.next=16;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](1);console.log(_context5.t0);dispatch({type:\"USER_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{message:\"wrong username or password\",type:\"error\"}});case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[1,11]]);}));return function(_x5){return _ref6.apply(this,arguments);};}();};export var updateUser=function updateUser(newEmail,oldPassword,newPassword,confirmNewPassword,id){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var user;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:\"USER_REQUEST\"});_context6.prev=1;_context6.next=4;return userService.update(newEmail,oldPassword,newPassword,confirmNewPassword,id);case 4:user=_context6.sent;window.localStorage.setItem(\"loggedUser\",JSON.stringify(user));destroyToken();setToken(user.token);dispatch({type:\"SET_USER\",data:user});_context6.next=15;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);dispatch({type:\"USER_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{message:_context6.t0.response.data.error,type:\"error\"}});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function(_x6){return _ref7.apply(this,arguments);};}();};export var deleteUser=function deleteUser(password,id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:\"USER_REQUEST\"});_context7.prev=1;_context7.next=4;return userService.deleteUser(password,id);case 4:window.localStorage.removeItem(\"loggedUser\");destroyToken();dispatch({type:\"CLEAR_USER\"});_context7.next=13;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);dispatch({type:\"USER_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{message:_context7.t0.response.data.error,type:\"error\"}});case 13:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x7){return _ref8.apply(this,arguments);};}();};export default userReducer;","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/reducers/userReducer.js"],"names":["loginService","CONSTANTS","setToken","destroyToken","userService","initialState","isFetching","data","userReducer","state","action","type","initUser","dispatch","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","token","messages","messagesRead","e","content","message","response","error","demoUser","DEMOTOKEN","setItem","stringify","console","log","createUser","username","email","password","checkPassword","create","login","logoutUser","removeItem","loginUser","updateUser","newEmail","oldPassword","newPassword","confirmNewPassword","id","update","deleteUser"],"mappings":"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","sourcesContent":["import loginService from \"../services/login\";\nimport { CONSTANTS } from \"../static/constants\";\nimport { setToken, destroyToken } from \"../utils/tokenHelper\";\nimport userService from \"../services/user\";\n\nconst initialState = { isFetching: true, data: {} };\n\nconst userReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"USER_REQUEST\":\n      return { ...state, isFetching: true };\n    case \"USER_REQUEST_FAIL\":\n      return { ...state, isFetching: false };\n    case \"SET_USER\":\n      return {\n        isFetching: false,\n        data: action.data,\n      };\n    case \"CLEAR_USER\":\n      return { isFetching: false, data: {} };\n    default:\n      return state;\n  }\n};\n\nexport const initUser = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const loggedUserJSON = window.localStorage.getItem(\"loggedUser\");\n\n      if (loggedUserJSON) {\n        const user = JSON.parse(loggedUserJSON);\n        setToken(user.token);\n        dispatch({\n          type: \"SET_MESSAGES\",\n          messages: user.messagesRead,\n        });\n        dispatch({\n          type: \"SET_USER\",\n          data: user,\n        });\n      } else {\n        dispatch({\n          type: \"USER_REQUEST_FAIL\",\n        });\n      }\n    } catch (e) {\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e.response.data.error,\n          type: \"error\",\n        },\n      });\n    }\n  };\n};\n\nexport const demoUser = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const user = CONSTANTS.DEMOTOKEN;\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead,\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e,\n          type: \"error\",\n        },\n      });\n    }\n  };\n};\n\nexport const createUser = ({ username, email, password, checkPassword }) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      await userService.create({\n        username,\n        email,\n        password,\n        checkPassword,\n      });\n\n      const user = await loginService.login({\n        email,\n        password,\n      });\n\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n\n      setToken(user.token);\n\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead,\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: `${username} created`,\n          type: \"success\",\n        },\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e.response.data.error,\n          type: \"danger\",\n        },\n      });\n    }\n  };\n};\n\nexport const logoutUser = () => {\n  return async (dispatch) => {\n    destroyToken();\n    window.localStorage.removeItem(\"loggedUser\");\n    dispatch({\n      type: \"CLEAR_USER\",\n    });\n  };\n};\n\nexport const loginUser = (email, password) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const user = await loginService.login({\n        email,\n        password,\n      });\n\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead,\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: \"wrong username or password\",\n          type: \"error\",\n        },\n      });\n    }\n  };\n};\n\nexport const updateUser = (\n  newEmail,\n  oldPassword,\n  newPassword,\n  confirmNewPassword,\n  id\n) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const user = await userService.update(\n        newEmail,\n        oldPassword,\n        newPassword,\n        confirmNewPassword,\n        id\n      );\n\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      destroyToken();\n      setToken(user.token);\n\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e.response.data.error,\n          type: \"error\",\n        },\n      });\n    }\n  };\n};\n\nexport const deleteUser = (password, id) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      await userService.deleteUser(password, id);\n\n      window.localStorage.removeItem(\"loggedUser\");\n      destroyToken();\n\n      dispatch({\n        type: \"CLEAR_USER\",\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e.response.data.error,\n          type: \"error\",\n        },\n      });\n    }\n  };\n};\n\nexport default userReducer;\n"]},"metadata":{},"sourceType":"module"}