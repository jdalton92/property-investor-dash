{"ast":null,"code":"import { v4 as uuid } from \"uuid\";\nimport loginService from \"../services/login\";\nimport { CONSTANTS } from \"../static/constants\";\nimport { setToken, destroyToken } from \"../utils/tokenHelper\";\nimport userService from \"../services/user\";\nconst initialState = {\n  isFetching: true,\n  data: {}\n};\n\nconst userReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"USER_REQUEST\":\n      return { ...state,\n        isFetching: true\n      };\n\n    case \"USER_REQUEST_FAIL\":\n      return { ...state,\n        isFetching: false\n      };\n\n    case \"SET_USER\":\n      return {\n        isFetching: false,\n        data: action.data\n      };\n\n    case \"CLEAR_USER\":\n      return {\n        isFetching: false,\n        data: {}\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const initUser = () => {\n  return async dispatch => {\n    dispatch({\n      type: \"USER_REQUEST\"\n    });\n\n    try {\n      const loggedUserJSON = window.localStorage.getItem(\"loggedUser\");\n\n      if (loggedUserJSON) {\n        const user = JSON.parse(loggedUserJSON);\n        setToken(user.token);\n        dispatch({\n          type: \"SET_MESSAGES\",\n          messages: user.messagesRead\n        });\n        dispatch({\n          type: \"SET_USER\",\n          data: user\n        });\n      } else {\n        dispatch({\n          type: \"USER_REQUEST_FAIL\"\n        });\n      }\n    } catch (e) {\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR\n        }\n      });\n    }\n  };\n};\nexport const demoUser = () => {\n  return async dispatch => {\n    dispatch({\n      type: \"USER_REQUEST\"\n    });\n\n    try {\n      const user = CONSTANTS.DEMOTOKEN;\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e,\n          type: CONSTANTS.NOTIFICATION.ERROR\n        }\n      });\n    }\n  };\n};\nexport const createUser = ({\n  username,\n  email,\n  password,\n  checkPassword\n}) => {\n  return async dispatch => {\n    dispatch({\n      type: \"USER_REQUEST\"\n    });\n\n    try {\n      await userService.create({\n        username,\n        email,\n        password,\n        checkPassword\n      });\n      const user = await loginService.login({\n        email,\n        password\n      });\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: `${username} created`,\n          type: CONSTANTS.NOTIFICATION.SUCCESS\n        }\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\"\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR\n        }\n      });\n    }\n  };\n};\nexport const logoutUser = () => {\n  return async dispatch => {\n    destroyToken();\n    window.localStorage.removeItem(\"loggedUser\");\n    dispatch({\n      type: \"CLEAR_USER\"\n    });\n  };\n};\nexport const loginUser = (email, password) => {\n  return async dispatch => {\n    dispatch({\n      type: \"USER_REQUEST\"\n    });\n\n    try {\n      const user = await loginService.login({\n        email,\n        password\n      });\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"USER_REQUEST_FAIL\"\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: \"wrong username or password\",\n          type: CONSTANTS.NOTIFICATION.ERROR\n        }\n      });\n    }\n  };\n};\nexport const updateUser = (newEmail, oldPassword, newPassword, confirmNewPassword, id) => {\n  return async dispatch => {\n    dispatch({\n      type: \"USER_REQUEST\"\n    });\n\n    try {\n      const user = await userService.update(newEmail, oldPassword, newPassword, confirmNewPassword, id);\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      destroyToken();\n      setToken(user.token);\n      dispatch({\n        type: \"SET_USER\",\n        data: user\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\"\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR\n        }\n      });\n    }\n  };\n};\nexport const deleteUser = (password, id) => {\n  return async dispatch => {\n    dispatch({\n      type: \"USER_REQUEST\"\n    });\n\n    try {\n      await userService.deleteUser(password, id);\n      window.localStorage.removeItem(\"loggedUser\");\n      destroyToken();\n      dispatch({\n        type: \"CLEAR_USER\"\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\"\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR\n        }\n      });\n    }\n  };\n};\nexport default userReducer;","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/reducers/userReducer.js"],"names":["v4","uuid","loginService","CONSTANTS","setToken","destroyToken","userService","initialState","isFetching","data","userReducer","state","action","type","initUser","dispatch","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","token","messages","messagesRead","e","content","id","message","response","error","NOTIFICATION","ERROR","demoUser","DEMOTOKEN","setItem","stringify","console","log","createUser","username","email","password","checkPassword","create","login","SUCCESS","logoutUser","removeItem","loginUser","updateUser","newEmail","oldPassword","newPassword","confirmNewPassword","update","deleteUser"],"mappings":"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","sourcesContent":["import { v4 as uuid } from \"uuid\";\nimport loginService from \"../services/login\";\nimport { CONSTANTS } from \"../static/constants\";\nimport { setToken, destroyToken } from \"../utils/tokenHelper\";\nimport userService from \"../services/user\";\n\nconst initialState = { isFetching: true, data: {} };\n\nconst userReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"USER_REQUEST\":\n      return { ...state, isFetching: true };\n    case \"USER_REQUEST_FAIL\":\n      return { ...state, isFetching: false };\n    case \"SET_USER\":\n      return {\n        isFetching: false,\n        data: action.data,\n      };\n    case \"CLEAR_USER\":\n      return { isFetching: false, data: {} };\n    default:\n      return state;\n  }\n};\n\nexport const initUser = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const loggedUserJSON = window.localStorage.getItem(\"loggedUser\");\n\n      if (loggedUserJSON) {\n        const user = JSON.parse(loggedUserJSON);\n        setToken(user.token);\n        dispatch({\n          type: \"SET_MESSAGES\",\n          messages: user.messagesRead,\n        });\n        dispatch({\n          type: \"SET_USER\",\n          data: user,\n        });\n      } else {\n        dispatch({\n          type: \"USER_REQUEST_FAIL\",\n        });\n      }\n    } catch (e) {\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const demoUser = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const user = CONSTANTS.DEMOTOKEN;\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead,\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const createUser = ({ username, email, password, checkPassword }) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      await userService.create({\n        username,\n        email,\n        password,\n        checkPassword,\n      });\n\n      const user = await loginService.login({\n        email,\n        password,\n      });\n\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n\n      setToken(user.token);\n\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead,\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: `${username} created`,\n          type: CONSTANTS.NOTIFICATION.SUCCESS,\n        },\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const logoutUser = () => {\n  return async (dispatch) => {\n    destroyToken();\n    window.localStorage.removeItem(\"loggedUser\");\n    dispatch({\n      type: \"CLEAR_USER\",\n    });\n  };\n};\n\nexport const loginUser = (email, password) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const user = await loginService.login({\n        email,\n        password,\n      });\n\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      setToken(user.token);\n\n      dispatch({\n        type: \"SET_MESSAGES\",\n        messages: user.messagesRead,\n      });\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: \"wrong username or password\",\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const updateUser = (\n  newEmail,\n  oldPassword,\n  newPassword,\n  confirmNewPassword,\n  id\n) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      const user = await userService.update(\n        newEmail,\n        oldPassword,\n        newPassword,\n        confirmNewPassword,\n        id\n      );\n\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(user));\n      destroyToken();\n      setToken(user.token);\n\n      dispatch({\n        type: \"SET_USER\",\n        data: user,\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const deleteUser = (password, id) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"USER_REQUEST\",\n    });\n    try {\n      await userService.deleteUser(password, id);\n\n      window.localStorage.removeItem(\"loggedUser\");\n      destroyToken();\n\n      dispatch({\n        type: \"CLEAR_USER\",\n      });\n    } catch (e) {\n      dispatch({\n        type: \"USER_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport default userReducer;\n"]},"metadata":{},"sourceType":"module"}