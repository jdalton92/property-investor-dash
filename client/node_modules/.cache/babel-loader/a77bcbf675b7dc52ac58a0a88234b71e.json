{"ast":null,"code":"import { v4 as uuid } from \"uuid\";\nimport userService from \"../services/user\";\nconst initialState = {\n  helperMessages: [],\n  notifications: []\n};\n\nconst notificationReducer = (state = initialState, action) => {\n  let newState;\n\n  switch (action.type) {\n    case \"SET_MESSAGE\":\n      newState = { ...state\n      };\n      newState.messagesRead = [...state.messagesRead, action.message];\n      return newState;\n\n    case \"SET_MESSAGES\":\n      if (action.messages && action.messages.length) {\n        newState = { ...state\n        };\n        newState.messagesRead = [...state.messagesRead, ...action.messages];\n        return newState;\n      } else {\n        return state;\n      }\n\n    case \"SET_NOTIFICATION\":\n      newState = { ...state\n      };\n      newState.notifications = [...state.notifications, action.content];\n      return newState;\n\n    case \"CLEAR_NOTIFICATION\":\n      newState = { ...state\n      };\n      newState.notifications = state.notifications.filter(n => n.id !== action.id);\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport const setNotification = (message, type) => {\n  return dispatch => {\n    const id = uuid();\n    dispatch({\n      type: \"SET_NOTIFICATION\",\n      content: {\n        id,\n        message,\n        type\n      }\n    });\n  };\n};\nexport const clearNotification = id => {\n  return dispatch => {\n    dispatch({\n      type: \"CLEAR_NOTIFICATION\",\n      id\n    });\n  };\n};\nexport const hideHelperMessage = (userId, type) => {\n  return async dispatch => {\n    try {\n      await userService.readMessage(userId, type);\n      let token = JSON.parse(window.localStorage.getItem(\"loggedUser\"));\n      console.log(token.messagesRead);\n      token.messagesRead = [...token.messagesRead, type];\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(token));\n      dispatch({\n        type: \"SET_MESSAGE\",\n        message: type\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e.response.data.error,\n          type: \"error\"\n        }\n      });\n    }\n  };\n};\nexport default notificationReducer;","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/reducers/notificationReducer.js"],"names":["v4","uuid","userService","initialState","helperMessages","notifications","notificationReducer","state","action","newState","type","messagesRead","message","messages","length","content","filter","n","id","setNotification","dispatch","clearNotification","hideHelperMessage","userId","readMessage","token","JSON","parse","window","localStorage","getItem","console","log","setItem","stringify","e","response","data","error"],"mappings":"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","sourcesContent":["import { v4 as uuid } from \"uuid\";\nimport userService from \"../services/user\";\n\nconst initialState = {\n  helperMessages: [],\n  notifications: [],\n};\n\nconst notificationReducer = (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case \"SET_MESSAGE\":\n      newState = { ...state };\n      newState.messagesRead = [...state.messagesRead, action.message];\n      return newState;\n    case \"SET_MESSAGES\":\n      if (action.messages && action.messages.length) {\n        newState = { ...state };\n        newState.messagesRead = [...state.messagesRead, ...action.messages];\n        return newState;\n      } else {\n        return state;\n      }\n    case \"SET_NOTIFICATION\":\n      newState = { ...state };\n      newState.notifications = [...state.notifications, action.content];\n      return newState;\n    case \"CLEAR_NOTIFICATION\":\n      newState = { ...state };\n      newState.notifications = state.notifications.filter(\n        (n) => n.id !== action.id\n      );\n      return newState;\n    default:\n      return state;\n  }\n};\n\nexport const setNotification = (message, type) => {\n  return (dispatch) => {\n    const id = uuid();\n    dispatch({\n      type: \"SET_NOTIFICATION\",\n      content: {\n        id,\n        message,\n        type,\n      },\n    });\n  };\n};\n\nexport const clearNotification = (id) => {\n  return (dispatch) => {\n    dispatch({\n      type: \"CLEAR_NOTIFICATION\",\n      id,\n    });\n  };\n};\n\nexport const hideHelperMessage = (userId, type) => {\n  return async (dispatch) => {\n    try {\n      await userService.readMessage(userId, type);\n      let token = JSON.parse(window.localStorage.getItem(\"loggedUser\"));\n      console.log(token.messagesRead);\n      token.messagesRead = [...token.messagesRead, type];\n      window.localStorage.setItem(\"loggedUser\", JSON.stringify(token));\n      dispatch({\n        type: \"SET_MESSAGE\",\n        message: type,\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          message: e.response.data.error,\n          type: \"error\",\n        },\n      });\n    }\n  };\n};\n\nexport default notificationReducer;\n"]},"metadata":{},"sourceType":"module"}