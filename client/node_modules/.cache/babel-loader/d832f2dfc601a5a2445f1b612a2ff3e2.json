{"ast":null,"code":"var _jsxFileName = \"/home/james/development/property-investor-dash/client/src/components/Settings.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form as FinalForm, Field } from \"react-final-form\";\nimport { createUser, updateUser, deleteUser } from \"../reducers/userReducer\";\nimport { setNotification } from \"../reducers/notificationReducer\";\nimport { required, minLength, isEmail, composeValidators } from \"../helpers/formValidatorHelper\";\nimport { Button, Spinner } from \"react-bootstrap\";\n\nconst Settings = ({\n  user,\n  updateUser,\n  deleteUser\n}) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id\n  };\n\n  const handleEmailChange = async values => {\n    // React final form handles e.preventDefault()\n    const confirm = window.confirm(`Change email from ${userDetails.oldEmail} to ${values.newEmail}?`);\n\n    if (confirm) {\n      await updateUser({\n        newEmail: values.newEmail,\n        ...userDetails\n      });\n    }\n  };\n\n  const handlePasswordChange = async values => {\n    // React final form handles e.preventDefault()\n    const {\n      oldPassword,\n      newPassword,\n      checkPassword\n    } = values;\n    await updateUser({\n      oldPassword,\n      newPassword,\n      checkPassword,\n      ...userDetails\n    });\n  };\n\n  const handleDelete = async ({\n    password\n  }) => {\n    // React final form handles e.preventDefault()\n    const confirm = window.confirm(`Delete ${userDetails.username}?`);\n\n    if (confirm) {\n      await deleteUser(password, user.id);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"form-section\",\n    id: \"create-form-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, user.isFetching ? /*#__PURE__*/React.createElement(Spinner, {\n    className: \"loading-spinner\",\n    animation: \"border\",\n    variant: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-outer-container form-card-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, \"Change Email\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-inner-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Existing Email\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-control\",\n    id: \"existing-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, user.data.email)), /*#__PURE__*/React.createElement(FinalForm, {\n    onSubmit: handleEmailChange,\n    render: ({\n      handleSubmit,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-element\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 23\n      }\n    }, \"New Email\"), /*#__PURE__*/React.createElement(Field, {\n      name: \"newEmail\",\n      validate: composeValidators(required, minLength(3), isEmail),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      className: \"form-control\",\n      placeholder: \"new@email.com\",\n      type: \"email\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 29\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 31\n      }\n    }, meta.error)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-button-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"form-button\",\n      type: \"submit\",\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 23\n      }\n    }, \"Update\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-outer-container form-card-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, \"Change Password\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-inner-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FinalForm, {\n    onSubmit: handlePasswordChange,\n    validate: values => {\n      const errors = {};\n\n      if (!values.checkPassword) {\n        errors.checkPassword = \"Required\";\n      }\n\n      if (values.newPassword !== values.checkPassword) {\n        errors.checkPassword = \"Passwords must match\";\n      }\n\n      return errors;\n    },\n    render: ({\n      handleSubmit,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-element\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 23\n      }\n    }, \"Old Password\"), /*#__PURE__*/React.createElement(Field, {\n      name: \"oldPassword\",\n      validate: composeValidators(required, minLength(3)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      className: \"form-control\",\n      placeholder: \"Password\",\n      type: \"password\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 31\n      }\n    }, meta.error)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 23\n      }\n    }, \"New Password\"), /*#__PURE__*/React.createElement(Field, {\n      name: \"newPassword\",\n      validate: composeValidators(required, minLength(3)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 23\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      className: \"form-control\",\n      placeholder: \"Password\",\n      type: \"password\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 29\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 31\n      }\n    }, meta.error)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }, \"Confirm New Password\"), /*#__PURE__*/React.createElement(Field, {\n      name: \"checkPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 23\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      className: \"form-control\",\n      placeholder: \"Password\",\n      type: \"password\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 31\n      }\n    }, meta.error)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-button-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"form-button\",\n      type: \"submit\",\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 23\n      }\n    }, \"Update\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-outer-container form-card-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, \"Delete Account\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-inner-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FinalForm, {\n    onSubmit: handleDelete,\n    render: ({\n      handleSubmit,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-element\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 23\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Field, {\n      name: \"password\",\n      validate: composeValidators(required, minLength(3)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 23\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      className: \"form-control\",\n      placeholder: \"Password\",\n      type: \"password\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 29\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 31\n      }\n    }, meta.error)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-button-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"form-button\",\n      type: \"submit\",\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 23\n      }\n    }, \"Delete\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  })))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nconst mapDispatchToProps = {\n  createUser,\n  updateUser,\n  deleteUser,\n  setNotification\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Settings.js"],"names":["React","connect","Form","FinalForm","Field","createUser","updateUser","deleteUser","setNotification","required","minLength","isEmail","composeValidators","Button","Spinner","Settings","user","userDetails","username","data","oldEmail","email","id","handleEmailChange","values","confirm","window","newEmail","handlePasswordChange","oldPassword","newPassword","checkPassword","handleDelete","password","isFetching","handleSubmit","input","meta","error","touched","errors","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form as FinalForm, Field } from \"react-final-form\";\nimport { createUser, updateUser, deleteUser } from \"../reducers/userReducer\";\nimport { setNotification } from \"../reducers/notificationReducer\";\nimport {\n  required,\n  minLength,\n  isEmail,\n  composeValidators,\n} from \"../helpers/formValidatorHelper\";\nimport { Button, Spinner } from \"react-bootstrap\";\n\nconst Settings = ({ user, updateUser, deleteUser }) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id,\n  };\n\n  const handleEmailChange = async (values) => {\n    // React final form handles e.preventDefault()\n    const confirm = window.confirm(\n      `Change email from ${userDetails.oldEmail} to ${values.newEmail}?`\n    );\n    if (confirm) {\n      await updateUser({\n        newEmail: values.newEmail,\n        ...userDetails,\n      });\n    }\n  };\n\n  const handlePasswordChange = async (values) => {\n    // React final form handles e.preventDefault()\n    const { oldPassword, newPassword, checkPassword } = values;\n    await updateUser({\n      oldPassword,\n      newPassword,\n      checkPassword,\n      ...userDetails,\n    });\n  };\n\n  const handleDelete = async ({ password }) => {\n    // React final form handles e.preventDefault()\n    const confirm = window.confirm(`Delete ${userDetails.username}?`);\n    if (confirm) {\n      await deleteUser(password, user.id);\n    }\n  };\n\n  return (\n    <section className=\"form-section\" id=\"create-form-section\">\n      {user.isFetching ? (\n        <Spinner\n          className=\"loading-spinner\"\n          animation=\"border\"\n          variant=\"primary\"\n        />\n      ) : (\n        <>\n          <div className=\"form-outer-container form-card-container\">\n            <div className=\"form-header\">\n              <h1>Change Email</h1>\n            </div>\n            <div className=\"form-inner-container\">\n              <div className=\"form-item\">\n                <h5>Existing Email</h5>\n                <div className=\"form-control\" id=\"existing-email\">\n                  {user.data.email}\n                </div>\n              </div>\n              <FinalForm\n                onSubmit={handleEmailChange}\n                render={({ handleSubmit, values }) => (\n                  <form className=\"form-element\" onSubmit={handleSubmit}>\n                    <div className=\"form-item\">\n                      <h5>New Email</h5>\n                      <Field\n                        name=\"newEmail\"\n                        validate={composeValidators(\n                          required,\n                          minLength(3),\n                          isEmail\n                        )}\n                      >\n                        {({ input, meta }) => (\n                          <div>\n                            <input\n                              className=\"form-control\"\n                              placeholder=\"new@email.com\"\n                              type=\"email\"\n                              {...input}\n                            />\n                            {meta.error && meta.touched && (\n                              <span className=\"form-error\">{meta.error}</span>\n                            )}\n                          </div>\n                        )}\n                      </Field>\n                    </div>\n                    <div className=\"form-button-container\">\n                      <Button\n                        className=\"form-button\"\n                        type=\"submit\"\n                        variant=\"primary\"\n                      >\n                        Update\n                      </Button>\n                    </div>\n                  </form>\n                )}\n              />\n            </div>\n          </div>\n          <div className=\"form-outer-container form-card-container\">\n            <div className=\"form-header\">\n              <h1>Change Password</h1>\n            </div>\n            <div className=\"form-inner-container\">\n              <FinalForm\n                onSubmit={handlePasswordChange}\n                validate={(values) => {\n                  const errors = {};\n                  if (!values.checkPassword) {\n                    errors.checkPassword = \"Required\";\n                  }\n                  if (values.newPassword !== values.checkPassword) {\n                    errors.checkPassword = \"Passwords must match\";\n                  }\n                  return errors;\n                }}\n                render={({ handleSubmit, values }) => (\n                  <form className=\"form-element\" onSubmit={handleSubmit}>\n                    <div className=\"form-item\">\n                      <h5>Old Password</h5>\n                      <Field\n                        name=\"oldPassword\"\n                        validate={composeValidators(required, minLength(3))}\n                      >\n                        {({ input, meta }) => (\n                          <div>\n                            <input\n                              className=\"form-control\"\n                              placeholder=\"Password\"\n                              type=\"password\"\n                              {...input}\n                            />\n                            {meta.error && meta.touched && (\n                              <span className=\"form-error\">{meta.error}</span>\n                            )}\n                          </div>\n                        )}\n                      </Field>\n                    </div>\n                    <div className=\"form-item\">\n                      <h5>New Password</h5>\n                      <Field\n                        name=\"newPassword\"\n                        validate={composeValidators(required, minLength(3))}\n                      >\n                        {({ input, meta }) => (\n                          <div>\n                            <input\n                              className=\"form-control\"\n                              placeholder=\"Password\"\n                              type=\"password\"\n                              {...input}\n                            />\n                            {meta.error && meta.touched && (\n                              <span className=\"form-error\">{meta.error}</span>\n                            )}\n                          </div>\n                        )}\n                      </Field>\n                    </div>\n                    <div className=\"form-item\">\n                      <h5>Confirm New Password</h5>\n                      <Field name=\"checkPassword\">\n                        {({ input, meta }) => (\n                          <div>\n                            <input\n                              className=\"form-control\"\n                              placeholder=\"Password\"\n                              type=\"password\"\n                              {...input}\n                            />\n                            {meta.error && meta.touched && (\n                              <span className=\"form-error\">{meta.error}</span>\n                            )}\n                          </div>\n                        )}\n                      </Field>\n                    </div>\n                    <div className=\"form-button-container\">\n                      <Button\n                        className=\"form-button\"\n                        type=\"submit\"\n                        variant=\"primary\"\n                      >\n                        Update\n                      </Button>\n                    </div>\n                  </form>\n                )}\n              />\n            </div>\n          </div>\n          <div className=\"form-outer-container form-card-container\">\n            <div className=\"form-header\">\n              <h1>Delete Account</h1>\n            </div>\n            <div className=\"form-inner-container\">\n              <FinalForm\n                onSubmit={handleDelete}\n                render={({ handleSubmit, values }) => (\n                  <form className=\"form-element\" onSubmit={handleSubmit}>\n                    <div className=\"form-item\">\n                      <h5>Password</h5>\n                      <Field\n                        name=\"password\"\n                        validate={composeValidators(required, minLength(3))}\n                      >\n                        {({ input, meta }) => (\n                          <div>\n                            <input\n                              className=\"form-control\"\n                              placeholder=\"Password\"\n                              type=\"password\"\n                              {...input}\n                            />\n                            {meta.error && meta.touched && (\n                              <span className=\"form-error\">{meta.error}</span>\n                            )}\n                          </div>\n                        )}\n                      </Field>\n                    </div>\n                    <div className=\"form-button-container\">\n                      <Button\n                        className=\"form-button\"\n                        type=\"submit\"\n                        variant=\"primary\"\n                      >\n                        Delete\n                      </Button>\n                    </div>\n                  </form>\n                )}\n              />\n            </div>\n          </div>\n        </>\n      )}\n    </section>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  createUser,\n  updateUser,\n  deleteUser,\n  setNotification,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n"]},"metadata":{},"sourceType":"module"}