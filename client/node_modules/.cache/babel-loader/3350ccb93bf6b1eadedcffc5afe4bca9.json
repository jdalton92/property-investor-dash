{"ast":null,"code":"import _regeneratorRuntime from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import dashboardService from\"../services/dashboard\";import{v4 as uuid}from\"uuid\";import{CONSTANTS}from\"../static/constants\";// const initialOwnerData = {\n//   housePrice: 1000000,\n//   deposit: 200000,\n//   loanType: \"principalAndInterest\",\n//   interestRate: 3.5,\n//   homeloanTerm: 30,\n//   overPayments: [{}],\n//   investmentPeriod: 15,\n//   sellingCosts: 3,\n//   capitalGrowth: 3.5,\n//   upfrontCosts: 3,\n//   recurringCosts: 1000,\n//   rentalYield: 3,\n//   investor: false,\n//   inflation: 3,\n// };\n// const initialDeveloperData = {\n//   acquisitionPrice: 100000,\n//   acquisitionCosts: 5,\n//   dwellings: 4,\n//   constructionCostPerDwelling: 400000,\n//   designFees: 10,\n//   constructionContingency: 10,\n//   statutoryFees: 3,\n//   constructionDuration: 24,\n//   planningAndDesign: 6,\n//   revenuePerDwelling: 750000,\n//   sellingCosts: 5,\n//   investmentPeriod: 5,\n//   recurringCosts: 30,\n//   rentalYield: 4,\n//   initialEquity: 400000,\n//   loanType: \"interestOnly\",\n//   interestRate: 3.5,\n//   loanTerm: 30,\n//   overPayments: [{}],\n//   capitalGrowth: 3.5,\n//   constructionCostGrowth: 2.5,\n// };\nvar initialState={isFetching:false,savedDashboards:[],currentDashboard:{preSave:false,data:{values:{}}}};var dashboardReducer=function dashboardReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var newState;switch(action.type){case\"DASHBOARD_REQUEST\":newState=_objectSpread({},state);newState.isFetching=true;return newState;case\"DASHBOARD_REQUEST_FAIL\":newState=_objectSpread({},state);newState.isFetching=false;newState.currentDashboard.preSave=false;return newState;case\"TEST_DASHBOARD\":newState=_objectSpread({},state);newState.isFetching=false;newState.currentDashboard.preSave=true;newState.currentDashboard.data.values=action.data;return newState;case\"PRE_SAVE_DASHBOARD\":newState=_objectSpread({},state);newState.currentDashboard.preSave=true;return newState;case\"INIT_DASHBOARDS\":return{isFetching:false,savedDashboards:action.data,currentDashboard:{preSave:false,data:{values:{}}}};case\"GET_DASHBOARD\":newState=_objectSpread({},state);newState.isFetching=false;newState.currentDashboard.preSave=false;newState.currentDashboard.data=action.data;return newState;case\"SAVE_DASHBOARD\":newState=_objectSpread({},state);newState.isFetching=false;newState.currentDashboard.preSave=false;newState.savedDashboards=[].concat(_toConsumableArray(state.savedDashboards),[action.data]);return newState;case\"UPDATE_DASHBOARDS\":var dashboardList=state.savedDashboards.filter(function(d){return d._id!==action.data._id;});return{isFetching:false,savedDashboards:[].concat(_toConsumableArray(dashboardList),[action.data]),currentDashboard:{preSave:false,data:{values:{}}}};case\"DELETE_DASHBOARD\":return{isFetching:false,savedDashboards:_toConsumableArray(state.savedDashboards.filter(function(d){return d._id!==action.id;})),currentDashboard:{preSave:false,data:{values:{}}}};default:return state;}};export var getDashboards=function getDashboards(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var dashboards;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"DASHBOARD_REQUEST\"});_context.prev=1;_context.next=4;return dashboardService.getAllDash();case 4:dashboards=_context.sent;dispatch({type:\"INIT_DASHBOARDS\",data:dashboards});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:\"DASHBOARD_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:_context.t0.response.data.error,type:CONSTANTS.NOTIFICATION.ERROR}});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getDashboard=function getDashboard(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var dashboard;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:\"DASHBOARD_REQUEST\"});_context2.prev=1;_context2.next=4;return dashboardService.getDash(id);case 4:dashboard=_context2.sent;dispatch({type:\"GET_DASHBOARD\",data:dashboard});_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:\"DASHBOARD_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:_context2.t0.response.data.error,type:CONSTANTS.NOTIFICATION.ERROR}});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var testDashboard=function testDashboard(dashboard){return function(dispatch){dispatch({type:\"TEST_DASHBOARD\",data:dashboard});};};export var preSaveDashboard=function preSaveDashboard(){return function(dispatch){dispatch({type:\"PRE_SAVE_DASHBOARD\"});};};export var saveDashboard=function saveDashboard(dashboardObject){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var newDash;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:\"DASHBOARD_REQUEST\"});_context3.prev=1;_context3.next=4;return dashboardService.saveDash(dashboardObject);case 4:newDash=_context3.sent;dispatch({type:\"SAVE_DASHBOARD\",data:newDash});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:\"\".concat(newDash.description,\" saved\"),type:CONSTANTS.NOTIFICATION.SUCCESS}});_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch({type:\"DASHBOARD_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:_context3.t0.response.data.error,type:CONSTANTS.NOTIFICATION.ERROR}});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var updateDashboard=function updateDashboard(dashboardObject){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var newDash;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:\"DASHBOARD_REQUEST\"});_context4.prev=1;_context4.next=4;return dashboardService.updateDash(dashboardObject);case 4:newDash=_context4.sent;dispatch({type:\"UPDATE_DASHBOARDS\",data:newDash});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:\"\".concat(newDash.description,\" saved\"),type:CONSTANTS.NOTIFICATION.SUCCESS}});_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);dispatch({type:\"DASHBOARD_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:_context4.t0.response.data.error,type:CONSTANTS.NOTIFICATION.ERROR}});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var deleteDashboard=function deleteDashboard(id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:\"DASHBOARD_REQUEST\"});_context5.prev=1;_context5.next=4;return dashboardService.removeDash(id);case 4:dispatch({type:\"DELETE_DASHBOARD\",id:id});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:\"Dashboard delected\",type:CONSTANTS.NOTIFICATION.SUCCESS}});_context5.next=13;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](1);console.log(_context5.t0);dispatch({type:\"DASHBOARD_REQUEST_FAIL\"});dispatch({type:\"SET_NOTIFICATION\",content:{id:uuid(),message:_context5.t0.response.data.error,type:CONSTANTS.NOTIFICATION.ERROR}});case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[1,8]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export default dashboardReducer;","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/reducers/dashboardReducer.js"],"names":["dashboardService","v4","uuid","CONSTANTS","initialState","isFetching","savedDashboards","currentDashboard","preSave","data","values","dashboardReducer","state","action","newState","type","dashboardList","filter","d","_id","id","getDashboards","dispatch","getAllDash","dashboards","content","message","response","error","NOTIFICATION","ERROR","getDashboard","getDash","dashboard","testDashboard","preSaveDashboard","saveDashboard","dashboardObject","saveDash","newDash","description","SUCCESS","updateDashboard","updateDash","deleteDashboard","removeDash","console","log"],"mappings":"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","sourcesContent":["import dashboardService from \"../services/dashboard\";\nimport { v4 as uuid } from \"uuid\";\nimport { CONSTANTS } from \"../static/constants\";\n\n// const initialOwnerData = {\n//   housePrice: 1000000,\n//   deposit: 200000,\n//   loanType: \"principalAndInterest\",\n//   interestRate: 3.5,\n//   homeloanTerm: 30,\n//   overPayments: [{}],\n//   investmentPeriod: 15,\n//   sellingCosts: 3,\n//   capitalGrowth: 3.5,\n//   upfrontCosts: 3,\n//   recurringCosts: 1000,\n//   rentalYield: 3,\n//   investor: false,\n//   inflation: 3,\n// };\n\n// const initialDeveloperData = {\n//   acquisitionPrice: 100000,\n//   acquisitionCosts: 5,\n//   dwellings: 4,\n//   constructionCostPerDwelling: 400000,\n//   designFees: 10,\n//   constructionContingency: 10,\n//   statutoryFees: 3,\n//   constructionDuration: 24,\n//   planningAndDesign: 6,\n\n//   revenuePerDwelling: 750000,\n//   sellingCosts: 5,\n//   investmentPeriod: 5,\n//   recurringCosts: 30,\n//   rentalYield: 4,\n\n//   initialEquity: 400000,\n//   loanType: \"interestOnly\",\n//   interestRate: 3.5,\n//   loanTerm: 30,\n//   overPayments: [{}],\n\n//   capitalGrowth: 3.5,\n//   constructionCostGrowth: 2.5,\n// };\n\nlet initialState = {\n  isFetching: false,\n  savedDashboards: [],\n  currentDashboard: {\n    preSave: false,\n    data: {\n      values: {},\n    },\n  },\n};\n\nconst dashboardReducer = (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case \"DASHBOARD_REQUEST\":\n      newState = { ...state };\n      newState.isFetching = true;\n      return newState;\n    case \"DASHBOARD_REQUEST_FAIL\":\n      newState = { ...state };\n      newState.isFetching = false;\n      newState.currentDashboard.preSave = false;\n      return newState;\n    case \"TEST_DASHBOARD\":\n      newState = { ...state };\n      newState.isFetching = false;\n      newState.currentDashboard.preSave = true;\n      newState.currentDashboard.data.values = action.data;\n      return newState;\n    case \"PRE_SAVE_DASHBOARD\":\n      newState = { ...state };\n      newState.currentDashboard.preSave = true;\n      return newState;\n    case \"INIT_DASHBOARDS\":\n      return {\n        isFetching: false,\n        savedDashboards: action.data,\n        currentDashboard: {\n          preSave: false,\n          data: {\n            values: {},\n          },\n        },\n      };\n    case \"GET_DASHBOARD\":\n      newState = { ...state };\n      newState.isFetching = false;\n      newState.currentDashboard.preSave = false;\n      newState.currentDashboard.data = action.data;\n      return newState;\n    case \"SAVE_DASHBOARD\":\n      newState = { ...state };\n      newState.isFetching = false;\n      newState.currentDashboard.preSave = false;\n      newState.savedDashboards = [...state.savedDashboards, action.data];\n      return newState;\n    case \"UPDATE_DASHBOARDS\":\n      const dashboardList = state.savedDashboards.filter(\n        (d) => d._id !== action.data._id\n      );\n      return {\n        isFetching: false,\n        savedDashboards: [...dashboardList, action.data],\n        currentDashboard: {\n          preSave: false,\n          data: {\n            values: {},\n          },\n        },\n      };\n    case \"DELETE_DASHBOARD\":\n      return {\n        isFetching: false,\n        savedDashboards: [\n          ...state.savedDashboards.filter((d) => d._id !== action.id),\n        ],\n        currentDashboard: {\n          preSave: false,\n          data: {\n            values: {},\n          },\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nexport const getDashboards = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"DASHBOARD_REQUEST\",\n    });\n    try {\n      const dashboards = await dashboardService.getAllDash();\n\n      dispatch({\n        type: \"INIT_DASHBOARDS\",\n        data: dashboards,\n      });\n    } catch (e) {\n      dispatch({\n        type: \"DASHBOARD_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const getDashboard = (id) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"DASHBOARD_REQUEST\",\n    });\n    try {\n      const dashboard = await dashboardService.getDash(id);\n\n      dispatch({\n        type: \"GET_DASHBOARD\",\n        data: dashboard,\n      });\n    } catch (e) {\n      dispatch({\n        type: \"DASHBOARD_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const testDashboard = (dashboard) => {\n  return (dispatch) => {\n    dispatch({\n      type: \"TEST_DASHBOARD\",\n      data: dashboard,\n    });\n  };\n};\n\nexport const preSaveDashboard = () => {\n  return (dispatch) => {\n    dispatch({\n      type: \"PRE_SAVE_DASHBOARD\",\n    });\n  };\n};\n\nexport const saveDashboard = (dashboardObject) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"DASHBOARD_REQUEST\",\n    });\n    try {\n      const newDash = await dashboardService.saveDash(dashboardObject);\n\n      dispatch({\n        type: \"SAVE_DASHBOARD\",\n        data: newDash,\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: `${newDash.description} saved`,\n          type: CONSTANTS.NOTIFICATION.SUCCESS,\n        },\n      });\n    } catch (e) {\n      dispatch({\n        type: \"DASHBOARD_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const updateDashboard = (dashboardObject) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"DASHBOARD_REQUEST\",\n    });\n    try {\n      const newDash = await dashboardService.updateDash(dashboardObject);\n\n      dispatch({\n        type: \"UPDATE_DASHBOARDS\",\n        data: newDash,\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: `${newDash.description} saved`,\n          type: CONSTANTS.NOTIFICATION.SUCCESS,\n        },\n      });\n    } catch (e) {\n      dispatch({\n        type: \"DASHBOARD_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport const deleteDashboard = (id) => {\n  return async (dispatch) => {\n    dispatch({\n      type: \"DASHBOARD_REQUEST\",\n    });\n    try {\n      await dashboardService.removeDash(id);\n\n      dispatch({\n        type: \"DELETE_DASHBOARD\",\n        id,\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: \"Dashboard delected\",\n          type: CONSTANTS.NOTIFICATION.SUCCESS,\n        },\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch({\n        type: \"DASHBOARD_REQUEST_FAIL\",\n      });\n      dispatch({\n        type: \"SET_NOTIFICATION\",\n        content: {\n          id: uuid(),\n          message: e.response.data.error,\n          type: CONSTANTS.NOTIFICATION.ERROR,\n        },\n      });\n    }\n  };\n};\n\nexport default dashboardReducer;\n"]},"metadata":{},"sourceType":"module"}