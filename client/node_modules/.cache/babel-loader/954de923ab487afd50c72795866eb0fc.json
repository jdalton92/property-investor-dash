{"ast":null,"code":"import _regeneratorRuntime from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{connect}from\"react-redux\";import{Form,Field}from\"react-final-form\";import{updateUser}from\"../../reducers/userReducer\";import{required,minLength,composeValidators}from\"../../utils/formValidatorHelper\";var ChangePassword=function ChangePassword(_ref){var user=_ref.user,updateUser=_ref.updateUser;var userDetails={username:user.data.username,oldEmail:user.data.email,id:user.data.id};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var oldPassword,newPassword,checkPassword;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// React final form handles e.preventDefault()\noldPassword=values.oldPassword,newPassword=values.newPassword,checkPassword=values.checkPassword;_context.next=3;return updateUser(_objectSpread({oldPassword:oldPassword,newPassword:newPassword,checkPassword:checkPassword},userDetails));case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit,validate:function validate(values){var errors={};if(!values.checkPassword){errors.checkPassword=\"Required\";}if(values.newPassword!==values.checkPassword){errors.checkPassword=\"Passwords must match\";}return errors;},render:function render(_ref3){var handleSubmit=_ref3.handleSubmit,values=_ref3.values;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"h2\",{className:\"f20 bold mt16 mb16\"},\"Change Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"r bs-3 bg-1 p20 mb20\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"old-password\",className:\"f16 mb8\"},\"Old Password\",/*#__PURE__*/React.createElement(\"span\",{className:\"font-red f12 bold ml4\"},\"*\")),/*#__PURE__*/React.createElement(Field,{name:\"oldPassword\",validate:composeValidators(required,minLength(3))},function(_ref4){var input=_ref4.input,meta=_ref4.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative mb20\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({id:\"old-password\",className:\"form-input bs-1 w100\",placeholder:\"Password\",type:\"password\"},input)),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"span\",{className:\"form-error f10\"},meta.error));}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"new-password\",className:\"f16 mb8\"},\"New Password\",/*#__PURE__*/React.createElement(\"span\",{className:\"font-red f12 bold ml4\"},\"*\")),/*#__PURE__*/React.createElement(Field,{name:\"newPassword\",validate:composeValidators(required,minLength(3))},function(_ref5){var input=_ref5.input,meta=_ref5.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative mb20\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({id:\"new-password\",className:\"form-input bs-1 w100\",placeholder:\"Password\",type:\"password\"},input)),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"span\",{className:\"form-error f10\"},meta.error));}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"confirm-password\",className:\"f16 mb8\"},\"Confirm New Password\",/*#__PURE__*/React.createElement(\"span\",{className:\"font-red f12 bold ml4\"},\"*\")),/*#__PURE__*/React.createElement(Field,{name:\"checkPassword\",validate:composeValidators(required,minLength(3))},function(_ref6){var input=_ref6.input,meta=_ref6.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative mb20\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({id:\"confirm-password\",className:\"form-input bs-1 w100\",placeholder:\"Password\",type:\"password\"},input)),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"span\",{className:\"form-error f10\"},meta.error));}),/*#__PURE__*/React.createElement(\"button\",{className:\"form-button-p font-white bs-2 pt8 pb8 r mt12\",type:\"submit\"},\"Update\")));}});};var mapStateToProps=function mapStateToProps(state){return{user:state.user};};var mapDispatchToProps={updateUser:updateUser};export default connect(mapStateToProps,mapDispatchToProps)(ChangePassword);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Settings/Settings.ChangePassword.js"],"names":["React","connect","Form","Field","updateUser","required","minLength","composeValidators","ChangePassword","user","userDetails","username","data","oldEmail","email","id","handleSubmit","values","oldPassword","newPassword","checkPassword","errors","input","meta","error","touched","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Field } from \"react-final-form\";\nimport { updateUser } from \"../../reducers/userReducer\";\nimport {\n  required,\n  minLength,\n  composeValidators,\n} from \"../../utils/formValidatorHelper\";\n\nconst ChangePassword = ({ user, updateUser }) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id,\n  };\n\n  const handleSubmit = async (values) => {\n    // React final form handles e.preventDefault()\n    const { oldPassword, newPassword, checkPassword } = values;\n    await updateUser({\n      oldPassword,\n      newPassword,\n      checkPassword,\n      ...userDetails,\n    });\n  };\n\n  return (\n    <Form\n      onSubmit={handleSubmit}\n      validate={(values) => {\n        const errors = {};\n        if (!values.checkPassword) {\n          errors.checkPassword = \"Required\";\n        }\n        if (values.newPassword !== values.checkPassword) {\n          errors.checkPassword = \"Passwords must match\";\n        }\n        return errors;\n      }}\n      render={({ handleSubmit, values }) => (\n        <form onSubmit={handleSubmit}>\n          <h2 className=\"f20 bold mt16 mb16\">Change Password</h2>\n          <div className=\"r bs-3 bg-1 p20 mb20\">\n            <label htmlFor=\"old-password\" className=\"f16 mb8\">\n              Old Password\n              <span className=\"font-red f12 bold ml4\">*</span>\n            </label>\n            <Field\n              name=\"oldPassword\"\n              validate={composeValidators(required, minLength(3))}\n            >\n              {({ input, meta }) => (\n                <div className=\"relative mb20\">\n                  <input\n                    id=\"old-password\"\n                    className=\"form-input bs-1 w100\"\n                    placeholder=\"Password\"\n                    type=\"password\"\n                    {...input}\n                  />\n                  {meta.error && meta.touched && (\n                    <span className=\"form-error f10\">{meta.error}</span>\n                  )}\n                </div>\n              )}\n            </Field>\n            <label htmlFor=\"new-password\" className=\"f16 mb8\">\n              New Password\n              <span className=\"font-red f12 bold ml4\">*</span>\n            </label>\n            <Field\n              name=\"newPassword\"\n              validate={composeValidators(required, minLength(3))}\n            >\n              {({ input, meta }) => (\n                <div className=\"relative mb20\">\n                  <input\n                    id=\"new-password\"\n                    className=\"form-input bs-1 w100\"\n                    placeholder=\"Password\"\n                    type=\"password\"\n                    {...input}\n                  />\n                  {meta.error && meta.touched && (\n                    <span className=\"form-error f10\">{meta.error}</span>\n                  )}\n                </div>\n              )}\n            </Field>\n            <label htmlFor=\"confirm-password\" className=\"f16 mb8\">\n              Confirm New Password\n              <span className=\"font-red f12 bold ml4\">*</span>\n            </label>\n            <Field\n              name=\"checkPassword\"\n              validate={composeValidators(required, minLength(3))}\n            >\n              {({ input, meta }) => (\n                <div className=\"relative mb20\">\n                  <input\n                    id=\"confirm-password\"\n                    className=\"form-input bs-1 w100\"\n                    placeholder=\"Password\"\n                    type=\"password\"\n                    {...input}\n                  />\n                  {meta.error && meta.touched && (\n                    <span className=\"form-error f10\">{meta.error}</span>\n                  )}\n                </div>\n              )}\n            </Field>\n            <button\n              className=\"form-button-p font-white bs-2 pt8 pb8 r mt12\"\n              type=\"submit\"\n            >\n              Update\n            </button>\n          </div>\n        </form>\n      )}\n    />\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  updateUser,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePassword);\n"]},"metadata":{},"sourceType":"module"}