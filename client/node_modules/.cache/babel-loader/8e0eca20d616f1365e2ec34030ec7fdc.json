{"ast":null,"code":"var _jsxFileName = \"/home/james/development/property-investor-dash/client/src/components/Dashboards/SaveDashboardModal.js\";\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Field } from \"react-final-form\";\nimport { setModal } from \"../../reducers/navigationReducer\";\nimport { saveDashboard, updateDashboard } from \"../../reducers/dashboardReducer\";\nimport { setNotification } from \"../../reducers/notificationReducer\";\nimport { composeValidators, required, maxLength, minLength } from \"../../utils/formValidatorHelper\";\nimport { CONSTANTS } from \"../../static/constants\";\nimport Button from \"../Shared/Button\";\nimport { Icon } from \"../Shared/Icon\";\nimport CloseIcon from \"../../styles/svg/close.svg\";\nimport SaveIcon from \"../../styles/svg/save.svg\";\nimport OverwriteIcon from \"../../styles/svg/overwrite.svg\";\n\nconst SaveDashboardModal = ({\n  isFetching,\n  currentDashboard,\n  savedDashboards,\n  user,\n  setModal,\n  setNotification,\n  saveDashboard,\n  updateDashboard\n}) => {\n  const [saveNew, setSaveNew] = useState(true);\n  const [overwrite, setOverwrite] = useState(\"\");\n  const history = useHistory();\n\n  const handleSave = async saveData => {\n    if (!user.data.username) {\n      setModal(CONSTANTS.MODALS.SAVEDASHBOARD, false);\n      setNotification(\"Please login to save dashboard\", \"danger\");\n      return;\n    }\n\n    const dashObject = {\n      values: currentDashboard,\n      ...saveData\n    };\n    await saveDashboard(dashObject);\n    setModal(CONSTANTS.MODALS.SAVEDASHBOARD, false);\n\n    if (!isFetching) {\n      setNotification(`${saveData.description} saved`, \"success\");\n      history.push(\"/saved-dashboards\");\n    }\n  };\n\n  const handleOverwrite = async saveData => {\n    // await updateDashboard(saveData);\n    console.log(\"overwrite \", overwrite);\n  };\n\n  const handleCancel = e => {\n    // React Final Form handles preventDefault()\n    setModal(CONSTANTS.MODALS.SAVEDASHBOARD, false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal mt60 fixed r bs-3 bg-1 p20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    ariaLabel: \"Close\",\n    dataBalloonPos: \"left\",\n    extraClass: \"modal-close-btn mt20 mr20 button-p align-c justify-c\",\n    onClick: handleCancel,\n    iconUrl: CloseIcon,\n    iconColor: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"f20 bold mb16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, \"Save Dashboard\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: `save-opt button-transp-s rt pl16 pr16 flex-row align-c justify-c jump ${saveNew ? \"active\" : \"\"}`,\n    onClick: () => setSaveNew(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    size: \"20px\",\n    url: SaveIcon,\n    color: \"black\",\n    hover: false,\n    active: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml8 f16 bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Save New\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: `save-opt button-transp-s rt pl16 pr16 flex-row align-c justify-c jump ${saveNew ? \"\" : \"active\"}`,\n    onClick: () => setSaveNew(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    size: \"20px\",\n    url: OverwriteIcon,\n    color: \"black\",\n    hover: false,\n    active: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml8 f16 bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Overwrite Existing\"))), saveNew && /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSave,\n    render: ({\n      handleSubmit,\n      form\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      className: \"save-form mt20 mb20\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-row align-c relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"save-description\",\n      className: \"f16 mb8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, \"Description\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"font-red f12 bold ml4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(Field, {\n      name: \"description\",\n      validate: composeValidators(required, minLength(3), maxLength(200)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"relative mb20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      id: \"save-description\",\n      className: \"form-input bs-1 w100\",\n      placeholder: \"Description\",\n      type: \"text\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error f10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 23\n      }\n    }, meta.error))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-row align-c relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"save-description\",\n      className: \"f16 mb8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"Address\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"font-red f12 bold ml4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(Field, {\n      name: \"address\",\n      validate: composeValidators(required, minLength(3), maxLength(200)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"relative mb20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n      id: \"save-address\",\n      className: \"form-input bs-1 w100\",\n      placeholder: \"Address\",\n      type: \"text\"\n    }, input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    })), meta.error && meta.touched && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"form-error f10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 23\n      }\n    }, meta.error))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"form-button-p bs-3 font-white mt12 pt8 pb8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, \"Save As\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), !saveNew && /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleOverwrite,\n    render: ({\n      handleSubmit,\n      form,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      className: \"save-form mt20 mb20\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-row align-c relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"save-overwrite\",\n      className: \"f16 mb8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"Dashboard\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"font-red f12 bold ml4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, \"*\"))), /*#__PURE__*/React.createElement(Field, {\n      name: \"dashboard\",\n      validate: required,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    }, ({\n      input,\n      meta\n    }) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n      id: \"save-overwrite\",\n      className: \"overpayments w100 mb20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 27\n      }\n    }, \"ref\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 27\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 27\n      }\n    }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 27\n      }\n    }, \"Created\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }\n    }, \"#\"), savedDashboards.map((d, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 29\n      }\n    }, i), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 29\n      }\n    }, d.description), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 29\n      }\n    }, d.type), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 29\n      }\n    }, d.date))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"form-button-p bs-3 font-white mt12 pt8 pb8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }\n    }, \"Save\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }) // <Form\n  //   onSubmit={handleOverwrite}\n  //   render={({ handleSubmit, form, values }) => (\n  //     <form className=\"save-form mt20 mb20\" onSubmit={handleSubmit}>\n  //       <div className=\"flex-row align-c relative\">\n  //         <label htmlFor=\"save-overwrite\" className=\"f16 mb8\">\n  //           Dashboard\n  //           <span className=\"font-red f12 bold ml4\">*</span>\n  //         </label>\n  //       </div>\n  //       <Field name=\"dashboard\" validate={required}>\n  //         {({ input, meta }) => (\n  //           <div className=\"relative mb20\">\n  //             <select\n  //               className=\"form-input select w100 bs-1\"\n  //               id=\"save-overwrite\"\n  //               name=\"dashboard\"\n  //               onChange={() => setOverwrite(values)}\n  //               multiple\n  //             >\n  //               {savedDashboards.map((d, i) => {\n  //                 let type;\n  //                 if (d.values.type === \"developer\") {\n  //                   type = \"Developer\";\n  //                 } else if (d.values?.investor) {\n  //                   type = \"Investor\";\n  //                 } else {\n  //                   type = \"Owner Occupier\";\n  //                 }\n  //                 return (\n  //                   <option key={i} value={d._id}>\n  //                     description: {d.description} | type: {type}\n  //                   </option>\n  //                 );\n  //               })}\n  //             </select>\n  //             {meta.error && meta.touched && (\n  //               <span className=\"form-error f10\">{meta.error}</span>\n  //             )}\n  //           </div>\n  //         )}\n  //       </Field>\n  //       <div className=\"form-buttons\">\n  //         <button\n  //           type=\"submit\"\n  //           className=\"form-button-p bs-3 font-white mt12 pt8 pb8\"\n  //         >\n  //           Save\n  //         </button>\n  //       </div>\n  //     </form>\n  //   )}\n  // />\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    isFetching: state.dashboards.isFetching,\n    currentDashboard: state.dashboards.currentDashboard.values,\n    savedDashboards: state.dashboards.savedDashboards,\n    saveDashboardModal: state.navigation.modal.saveDashboard,\n    user: state.user,\n    requestSuceed: state.navigation.requestSuceed\n  };\n};\n\nconst mapDispatchToProps = {\n  setModal,\n  saveDashboard,\n  updateDashboard,\n  setNotification\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveDashboardModal);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Dashboards/SaveDashboardModal.js"],"names":["React","useState","connect","useHistory","Form","Field","setModal","saveDashboard","updateDashboard","setNotification","composeValidators","required","maxLength","minLength","CONSTANTS","Button","Icon","SaveDashboardModal","isFetching","currentDashboard","savedDashboards","user","saveNew","setSaveNew","overwrite","setOverwrite","history","handleSave","saveData","data","username","MODALS","SAVEDASHBOARD","dashObject","values","description","push","handleOverwrite","console","log","handleCancel","e","CloseIcon","SaveIcon","OverwriteIcon","handleSubmit","form","input","meta","error","touched","map","d","i","type","date","mapStateToProps","state","dashboards","saveDashboardModal","navigation","modal","requestSuceed","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Field } from \"react-final-form\";\nimport { setModal } from \"../../reducers/navigationReducer\";\nimport {\n  saveDashboard,\n  updateDashboard,\n} from \"../../reducers/dashboardReducer\";\nimport { setNotification } from \"../../reducers/notificationReducer\";\nimport {\n  composeValidators,\n  required,\n  maxLength,\n  minLength,\n} from \"../../utils/formValidatorHelper\";\nimport { CONSTANTS } from \"../../static/constants\";\nimport Button from \"../Shared/Button\";\nimport { Icon } from \"../Shared/Icon\";\nimport CloseIcon from \"../../styles/svg/close.svg\";\nimport SaveIcon from \"../../styles/svg/save.svg\";\nimport OverwriteIcon from \"../../styles/svg/overwrite.svg\";\n\nconst SaveDashboardModal = ({\n  isFetching,\n  currentDashboard,\n  savedDashboards,\n  user,\n  setModal,\n  setNotification,\n  saveDashboard,\n  updateDashboard,\n}) => {\n  const [saveNew, setSaveNew] = useState(true);\n  const [overwrite, setOverwrite] = useState(\"\");\n  const history = useHistory();\n\n  const handleSave = async (saveData) => {\n    if (!user.data.username) {\n      setModal(CONSTANTS.MODALS.SAVEDASHBOARD, false);\n      setNotification(\"Please login to save dashboard\", \"danger\");\n      return;\n    }\n\n    const dashObject = {\n      values: currentDashboard,\n      ...saveData,\n    };\n\n    await saveDashboard(dashObject);\n\n    setModal(CONSTANTS.MODALS.SAVEDASHBOARD, false);\n\n    if (!isFetching) {\n      setNotification(`${saveData.description} saved`, \"success\");\n      history.push(\"/saved-dashboards\");\n    }\n  };\n\n  const handleOverwrite = async (saveData) => {\n    // await updateDashboard(saveData);\n    console.log(\"overwrite \", overwrite);\n  };\n\n  const handleCancel = (e) => {\n    // React Final Form handles preventDefault()\n    setModal(CONSTANTS.MODALS.SAVEDASHBOARD, false);\n  };\n\n  return (\n    <div className=\"modal mt60 fixed r bs-3 bg-1 p20\">\n      <Button\n        ariaLabel={\"Close\"}\n        dataBalloonPos={\"left\"}\n        extraClass={\"modal-close-btn mt20 mr20 button-p align-c justify-c\"}\n        onClick={handleCancel}\n        iconUrl={CloseIcon}\n        iconColor={\"white\"}\n      />\n      <h2 className=\"f20 bold mb16\">Save Dashboard</h2>\n      <div className=\"flex-row\">\n        <button\n          type=\"submit\"\n          className={`save-opt button-transp-s rt pl16 pr16 flex-row align-c justify-c jump ${\n            saveNew ? \"active\" : \"\"\n          }`}\n          onClick={() => setSaveNew(true)}\n        >\n          <Icon\n            size={\"20px\"}\n            url={SaveIcon}\n            color={\"black\"}\n            hover={false}\n            active={false}\n          />\n          <span className=\"ml8 f16 bold\">Save New</span>\n        </button>\n        <button\n          type=\"submit\"\n          className={`save-opt button-transp-s rt pl16 pr16 flex-row align-c justify-c jump ${\n            saveNew ? \"\" : \"active\"\n          }`}\n          onClick={() => setSaveNew(false)}\n        >\n          <Icon\n            size={\"20px\"}\n            url={OverwriteIcon}\n            color={\"black\"}\n            hover={false}\n            active={false}\n          />\n          <span className=\"ml8 f16 bold\">Overwrite Existing</span>\n        </button>\n      </div>\n      {saveNew && (\n        <Form\n          onSubmit={handleSave}\n          render={({ handleSubmit, form }) => (\n            <form className=\"save-form mt20 mb20\" onSubmit={handleSubmit}>\n              <div className=\"flex-row align-c relative\">\n                <label htmlFor=\"save-description\" className=\"f16 mb8\">\n                  Description\n                  <span className=\"font-red f12 bold ml4\">*</span>\n                </label>\n              </div>\n              <Field\n                name=\"description\"\n                validate={composeValidators(\n                  required,\n                  minLength(3),\n                  maxLength(200)\n                )}\n              >\n                {({ input, meta }) => (\n                  <div className=\"relative mb20\">\n                    <input\n                      id=\"save-description\"\n                      className=\"form-input bs-1 w100\"\n                      placeholder=\"Description\"\n                      type=\"text\"\n                      {...input}\n                    />\n                    {meta.error && meta.touched && (\n                      <span className=\"form-error f10\">{meta.error}</span>\n                    )}\n                  </div>\n                )}\n              </Field>\n              <div className=\"flex-row align-c relative\">\n                <label htmlFor=\"save-description\" className=\"f16 mb8\">\n                  Address\n                  <span className=\"font-red f12 bold ml4\">*</span>\n                </label>\n              </div>\n              <Field\n                name=\"address\"\n                validate={composeValidators(\n                  required,\n                  minLength(3),\n                  maxLength(200)\n                )}\n              >\n                {({ input, meta }) => (\n                  <div className=\"relative mb20\">\n                    <input\n                      id=\"save-address\"\n                      className=\"form-input bs-1 w100\"\n                      placeholder=\"Address\"\n                      type=\"text\"\n                      {...input}\n                    />\n                    {meta.error && meta.touched && (\n                      <span className=\"form-error f10\">{meta.error}</span>\n                    )}\n                  </div>\n                )}\n              </Field>\n              <div className=\"form-buttons\">\n                <button\n                  type=\"submit\"\n                  className=\"form-button-p bs-3 font-white mt12 pt8 pb8\"\n                >\n                  Save As\n                </button>\n              </div>\n            </form>\n          )}\n        />\n      )}\n      {!saveNew && (\n        <Form\n          onSubmit={handleOverwrite}\n          render={({ handleSubmit, form, values }) => (\n            <form className=\"save-form mt20 mb20\" onSubmit={handleSubmit}>\n              <div className=\"flex-row align-c relative\">\n                <label htmlFor=\"save-overwrite\" className=\"f16 mb8\">\n                  Dashboard\n                  <span className=\"font-red f12 bold ml4\">*</span>\n                </label>\n              </div>\n              <Field name=\"dashboard\" validate={required}>\n                {({ input, meta }) => (\n                  <>\n                    <table\n                      id=\"save-overwrite\"\n                      className=\"overpayments w100 mb20\"\n                    >\n                      <thead>\n                        <tr>\n                          <th>ref</th>\n                          <th>Description</th>\n                          <th>Type</th>\n                          <th>Created</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <th>#</th>\n                        {savedDashboards.map((d, i) => (\n                          <tr>\n                            <td>{i}</td>\n                            <td>{d.description}</td>\n                            <td>{d.type}</td>\n                            <td>{d.date}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </>\n                )}\n              </Field>\n              <div className=\"form-buttons\">\n                <button\n                  type=\"submit\"\n                  className=\"form-button-p bs-3 font-white mt12 pt8 pb8\"\n                >\n                  Save\n                </button>\n              </div>\n            </form>\n          )}\n        />\n\n        // <Form\n        //   onSubmit={handleOverwrite}\n        //   render={({ handleSubmit, form, values }) => (\n        //     <form className=\"save-form mt20 mb20\" onSubmit={handleSubmit}>\n        //       <div className=\"flex-row align-c relative\">\n        //         <label htmlFor=\"save-overwrite\" className=\"f16 mb8\">\n        //           Dashboard\n        //           <span className=\"font-red f12 bold ml4\">*</span>\n        //         </label>\n        //       </div>\n        //       <Field name=\"dashboard\" validate={required}>\n        //         {({ input, meta }) => (\n        //           <div className=\"relative mb20\">\n        //             <select\n        //               className=\"form-input select w100 bs-1\"\n        //               id=\"save-overwrite\"\n        //               name=\"dashboard\"\n        //               onChange={() => setOverwrite(values)}\n        //               multiple\n        //             >\n        //               {savedDashboards.map((d, i) => {\n        //                 let type;\n        //                 if (d.values.type === \"developer\") {\n        //                   type = \"Developer\";\n        //                 } else if (d.values?.investor) {\n        //                   type = \"Investor\";\n        //                 } else {\n        //                   type = \"Owner Occupier\";\n        //                 }\n        //                 return (\n        //                   <option key={i} value={d._id}>\n        //                     description: {d.description} | type: {type}\n        //                   </option>\n        //                 );\n        //               })}\n        //             </select>\n        //             {meta.error && meta.touched && (\n        //               <span className=\"form-error f10\">{meta.error}</span>\n        //             )}\n        //           </div>\n        //         )}\n        //       </Field>\n        //       <div className=\"form-buttons\">\n        //         <button\n        //           type=\"submit\"\n        //           className=\"form-button-p bs-3 font-white mt12 pt8 pb8\"\n        //         >\n        //           Save\n        //         </button>\n        //       </div>\n        //     </form>\n        //   )}\n        // />\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    isFetching: state.dashboards.isFetching,\n    currentDashboard: state.dashboards.currentDashboard.values,\n    savedDashboards: state.dashboards.savedDashboards,\n    saveDashboardModal: state.navigation.modal.saveDashboard,\n    user: state.user,\n    requestSuceed: state.navigation.requestSuceed,\n  };\n};\n\nconst mapDispatchToProps = {\n  setModal,\n  saveDashboard,\n  updateDashboard,\n  setNotification,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveDashboardModal);\n"]},"metadata":{},"sourceType":"module"}