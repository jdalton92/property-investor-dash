{"ast":null,"code":"import _regeneratorRuntime from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/james/development/property-investor-dash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{connect}from\"react-redux\";import{Form,Field}from\"react-final-form\";import{deleteUser}from\"../../reducers/userReducer\";import{required,minLength,composeValidators}from\"../../utils/formValidatorHelper\";var DeleteAccount=function DeleteAccount(_ref){var user=_ref.user,deleteUser=_ref.deleteUser;var userDetails={username:user.data.username,oldEmail:user.data.email,id:user.data.id};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2){var password,confirm;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:password=_ref2.password;confirm=window.confirm(\"Delete \".concat(userDetails.username,\"?\"));if(!confirm){_context.next=5;break;}_context.next=5;return deleteUser(password,user.id);case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit,render:function render(_ref4){var handleSubmit=_ref4.handleSubmit,values=_ref4.values;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"h2\",{className:\"f20 bold mt16 mb16\"},\"Delete Account\"),/*#__PURE__*/React.createElement(\"div\",{className:\"r bs-3 bg-1 p20 mb20\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\",className:\"f16 mb8\"},\"Password\",/*#__PURE__*/React.createElement(\"span\",{className:\"font-red f12 bold ml4\"},\"*\")),/*#__PURE__*/React.createElement(Field,{name:\"password\",validate:composeValidators(required,minLength(3))},function(_ref5){var input=_ref5.input,meta=_ref5.meta;return/*#__PURE__*/React.createElement(\"div\",{className:\"relative mb20\"},/*#__PURE__*/React.createElement(\"input\",Object.assign({id:\"password\",className:\"form-input bs-1 w100\",placeholder:\"Password\",type:\"password\"},input)),meta.error&&meta.touched&&/*#__PURE__*/React.createElement(\"span\",{className:\"form-error f10\"},meta.error));}),/*#__PURE__*/React.createElement(\"button\",{className:\"form-button-p font-white bs-2 pt8 pb8 r mt12\",type:\"submit\"},\"Delete\")));}});};var mapStateToProps=function mapStateToProps(state){return{user:state.user};};var mapDispatchToProps={deleteUser:deleteUser};export default connect(mapStateToProps,mapDispatchToProps)(DeleteAccount);","map":{"version":3,"sources":["/home/james/development/property-investor-dash/client/src/components/Settings/Settings.DeleteAccount.js"],"names":["React","connect","Form","Field","deleteUser","required","minLength","composeValidators","DeleteAccount","user","userDetails","username","data","oldEmail","email","id","handleSubmit","password","confirm","window","values","input","meta","error","touched","mapStateToProps","state","mapDispatchToProps"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,IAAT,CAAeC,KAAf,KAA4B,kBAA5B,CACA,OAASC,UAAT,KAA2B,4BAA3B,CACA,OACEC,QADF,CAEEC,SAFF,CAGEC,iBAHF,KAIO,iCAJP,CAMA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAA0B,IAAvBC,CAAAA,IAAuB,MAAvBA,IAAuB,CAAjBL,UAAiB,MAAjBA,UAAiB,CAC9C,GAAMM,CAAAA,WAAW,CAAG,CAClBC,QAAQ,CAAEF,IAAI,CAACG,IAAL,CAAUD,QADF,CAElBE,QAAQ,CAAEJ,IAAI,CAACG,IAAL,CAAUE,KAFF,CAGlBC,EAAE,CAAEN,IAAI,CAACG,IAAL,CAAUG,EAHI,CAApB,CAMA,GAAMC,CAAAA,YAAY,2FAAG,6JAASC,QAAT,OAASA,QAAT,CACbC,OADa,CACHC,MAAM,CAACD,OAAP,kBAAyBR,WAAW,CAACC,QAArC,MADG,KAEfO,OAFe,+CAGXd,CAAAA,UAAU,CAACa,QAAD,CAAWR,IAAI,CAACM,EAAhB,CAHC,uDAAH,kBAAZC,CAAAA,YAAY,6CAAlB,CAOA,mBACE,oBAAC,IAAD,EACE,QAAQ,CAAEA,YADZ,CAEE,MAAM,CAAE,0BAAGA,CAAAA,YAAH,OAAGA,YAAH,CAAiBI,MAAjB,OAAiBA,MAAjB,oBACN,4BAAM,QAAQ,CAAEJ,YAAhB,eACE,0BAAI,SAAS,CAAC,oBAAd,mBADF,cAEE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,SAApC,0BAEE,4BAAM,SAAS,CAAC,uBAAhB,MAFF,CADF,cAKE,oBAAC,KAAD,EACE,IAAI,CAAC,UADP,CAEE,QAAQ,CAAET,iBAAiB,CAACF,QAAD,CAAWC,SAAS,CAAC,CAAD,CAApB,CAF7B,EAIG,mBAAGe,CAAAA,KAAH,OAAGA,KAAH,CAAUC,IAAV,OAAUA,IAAV,oBACC,2BAAK,SAAS,CAAC,eAAf,eACE,2CACE,EAAE,CAAC,UADL,CAEE,SAAS,CAAC,sBAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,IAAI,CAAC,UAJP,EAKMD,KALN,EADF,CAQGC,IAAI,CAACC,KAAL,EAAcD,IAAI,CAACE,OAAnB,eACC,4BAAM,SAAS,CAAC,gBAAhB,EAAkCF,IAAI,CAACC,KAAvC,CATJ,CADD,EAJH,CALF,cAwBE,8BACE,SAAS,CAAC,8CADZ,CAEE,IAAI,CAAC,QAFP,WAxBF,CAFF,CADM,EAFV,EADF,CAyCD,CAvDD,CAyDA,GAAME,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC,MAAO,CACLjB,IAAI,CAAEiB,KAAK,CAACjB,IADP,CAAP,CAGD,CAJD,CAMA,GAAMkB,CAAAA,kBAAkB,CAAG,CACzBvB,UAAU,CAAVA,UADyB,CAA3B,CAIA,cAAeH,CAAAA,OAAO,CAACwB,eAAD,CAAkBE,kBAAlB,CAAP,CAA6CnB,aAA7C,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Form, Field } from \"react-final-form\";\nimport { deleteUser } from \"../../reducers/userReducer\";\nimport {\n  required,\n  minLength,\n  composeValidators,\n} from \"../../utils/formValidatorHelper\";\n\nconst DeleteAccount = ({ user, deleteUser }) => {\n  const userDetails = {\n    username: user.data.username,\n    oldEmail: user.data.email,\n    id: user.data.id,\n  };\n\n  const handleSubmit = async ({ password }) => {\n    const confirm = window.confirm(`Delete ${userDetails.username}?`);\n    if (confirm) {\n      await deleteUser(password, user.id);\n    }\n  };\n\n  return (\n    <Form\n      onSubmit={handleSubmit}\n      render={({ handleSubmit, values }) => (\n        <form onSubmit={handleSubmit}>\n          <h2 className=\"f20 bold mt16 mb16\">Delete Account</h2>\n          <div className=\"r bs-3 bg-1 p20 mb20\">\n            <label htmlFor=\"password\" className=\"f16 mb8\">\n              Password\n              <span className=\"font-red f12 bold ml4\">*</span>\n            </label>\n            <Field\n              name=\"password\"\n              validate={composeValidators(required, minLength(3))}\n            >\n              {({ input, meta }) => (\n                <div className=\"relative mb20\">\n                  <input\n                    id=\"password\"\n                    className=\"form-input bs-1 w100\"\n                    placeholder=\"Password\"\n                    type=\"password\"\n                    {...input}\n                  />\n                  {meta.error && meta.touched && (\n                    <span className=\"form-error f10\">{meta.error}</span>\n                  )}\n                </div>\n              )}\n            </Field>\n            <button\n              className=\"form-button-p font-white bs-2 pt8 pb8 r mt12\"\n              type=\"submit\"\n            >\n              Delete\n            </button>\n          </div>\n        </form>\n      )}\n    />\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = {\n  deleteUser,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteAccount);\n"]},"metadata":{},"sourceType":"module"}